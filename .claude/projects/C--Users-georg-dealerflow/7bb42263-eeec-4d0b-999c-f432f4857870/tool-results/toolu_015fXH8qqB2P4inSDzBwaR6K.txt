     1→import { useState, useEffect } from "react";
     2→import { toast } from "react-hot-toast";
     3→
     4→// Helper for relative time display
     5→const relativeTime = (date) => {
     6→  if (!date) return "";
     7→  const days = Math.floor((Date.now() - new Date(date).getTime()) / (1000 * 60 * 60 * 24));
     8→  if (days === 0) {
     9→    const hours = Math.floor((Date.now() - new Date(date).getTime()) / (1000 * 60 * 60));
    10→    if (hours === 0) {
    11→      const mins = Math.floor((Date.now() - new Date(date).getTime()) / (1000 * 60));
    12→      return mins <= 1 ? "Just now" : `${mins}m ago`;
    13→    }
    14→    return `${hours}h ago`;
    15→  }
    16→  if (days === 1) return "Yesterday";
    17→  if (days < 7) return `${days}d ago`;
    18→  if (days < 30) return `${Math.floor(days / 7)}w ago`;
    19→  return `${Math.floor(days / 30)}mo ago`;
    20→};
    21→
    22→// Format date helper
    23→const formatDate = (date) => {
    24→  if (!date) return "";
    25→  return new Date(date).toLocaleDateString("en-GB", {
    26→    day: "numeric",
    27→    month: "short",
    28→    year: "numeric",
    29→  });
    30→};
    31→
    32→const STATUS_LABELS = {
    33→  in_stock: "In Prep",
    34→  in_prep: "Advertised",
    35→  live: "Sold In Progress",
    36→  reserved: "Completed",
    37→  delivered: "Delivered",
    38→};
    39→
    40→/**
    41→ * VehicleDrawer - A reusable component to display vehicle details in a drawer/modal
    42→ *
    43→ * Props:
    44→ * - vehicleId: The ID of the vehicle to display
    45→ * - isOpen: Whether the drawer is open
    46→ * - onClose: Function to call when closing the drawer
    47→ * - isStacked: If true, renders as a stacked drawer (overlays another drawer)
    48→ * - readOnly: If true, hides editing controls (default: true for warranty context)
    49→ */
    50→export default function VehicleDrawer({
    51→  vehicleId,
    52→  isOpen,
    53→  onClose,
    54→  isStacked = false,
    55→  readOnly = true,
    56→}) {
    57→  const [vehicle, setVehicle] = useState(null);
    58→  const [isLoading, setIsLoading] = useState(false);
    59→  const [activeTab, setActiveTab] = useState("overview");
    60→  const [expandedIssues, setExpandedIssues] = useState({});
    61→
    62→  useEffect(() => {
    63→    if (isOpen && vehicleId) {
    64→      fetchVehicle();
    65→    }
    66→  }, [isOpen, vehicleId]);
    67→
    68→  const fetchVehicle = async () => {
    69→    setIsLoading(true);
    70→    try {
    71→      const res = await fetch(`/api/vehicles/${vehicleId}`);
    72→      if (!res.ok) throw new Error("Failed to load vehicle");
    73→      const data = await res.json();
    74→      setVehicle(data);
    75→    } catch (error) {
    76→      toast.error("Failed to load vehicle details");
    77→      console.error(error);
    78→    } finally {
    79→      setIsLoading(false);
    80→    }
    81→  };
    82→
    83→  if (!isOpen) return null;
    84→
    85→  return (
    86→    <div
    87→      className={`fixed inset-0 flex justify-end ${isStacked ? "z-[60]" : "z-50"} overflow-hidden`}
    88→      style={{ touchAction: "none" }}
    89→    >
    90→      {/* Backdrop */}
    91→      <div
    92→        className={`absolute inset-0 ${isStacked ? "bg-black/30" : "bg-black/50"}`}
    93→        onClick={onClose}
    94→      />
    95→
    96→      {/* Drawer - Fixed overlay that cannot slide horizontally */}
    97→      <div
    98→        className={`relative bg-white h-full flex flex-col ${
    99→          isStacked ? "w-full max-w-2xl shadow-2xl" : "w-full max-w-3xl"
   100→        } min-w-0 translate-x-0 overscroll-contain`}
   101→        style={{
   102→          touchAction: "pan-y",
   103→          WebkitOverflowScrolling: "touch",
   104→        }}
   105→      >
   106→        {isLoading ? (
   107→          <div className="flex items-center justify-center h-full">
   108→            <span className="loading loading-spinner loading-lg"></span>
   109→          </div>
   110→        ) : !vehicle ? (
   111→          <div className="flex flex-col items-center justify-center h-full">
   112→            <p className="text-base-content/60">Vehicle not found</p>
   113→            <button className="btn btn-ghost btn-sm mt-2" onClick={onClose}>
   114→              Close
   115→            </button>
   116→          </div>
   117→        ) : (
   118→          <>
   119→            {/* Header - Sticky with proper z-index */}
   120→            <div className="sticky top-0 bg-white border-b border-slate-200 px-4 md:px-6 py-3 md:py-4 flex justify-between items-center z-10 shrink-0">
   121→              <div className="flex items-center gap-3">
   122→                <button
   123→                  className="btn btn-ghost btn-sm btn-circle"
   124→                  onClick={onClose}
   125→                  title="Close"
   126→                >
   127→                  <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
   128→                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
   129→                  </svg>
   130→                </button>
   131→                <div>
   132→                  <h2 className="text-lg md:text-xl font-bold text-slate-900">
   133→                    {vehicle.year || ""} {vehicle.make} {vehicle.model}
   134→                  </h2>
   135→                  <p className="text-xs md:text-sm text-slate-500 font-mono mt-0.5">
   136→                    {vehicle.regCurrent}
   137→                  </p>
   138→                </div>
   139→              </div>
   140→              <button className="btn btn-ghost btn-sm" onClick={onClose}>
   141→                ✕
   142→              </button>
   143→            </div>
   144→
   145→            {/* Tabs - Sticky below header */}
   146→            <div className="sticky top-[57px] md:top-[65px] bg-base-100 border-b border-base-300 px-4 z-10 shrink-0">
   147→              <div className="tabs tabs-bordered overflow-x-auto">
   148→                <button
   149→                  className={`tab ${activeTab === "overview" ? "tab-active" : ""}`}
   150→                  onClick={() => setActiveTab("overview")}
   151→                >
   152→                  Overview
   153→                </button>
   154→                <button
   155→                  className={`tab ${activeTab === "checklist" ? "tab-active" : ""}`}
   156→                  onClick={() => setActiveTab("checklist")}
   157→                >
   158→                  Checklist {vehicle.tasks?.length > 0 && `(${vehicle.tasks.length})`}
   159→                </button>
   160→                <button
   161→                  className={`tab ${activeTab === "issues" ? "tab-active" : ""}`}
   162→                  onClick={() => setActiveTab("issues")}
   163→                >
   164→                  Issues {vehicle.issues?.length > 0 && `(${vehicle.issues.length})`}
   165→                </button>
   166→                <button
   167→                  className={`tab ${activeTab === "documents" ? "tab-active" : ""}`}
   168→                  onClick={() => setActiveTab("documents")}
   169→                >
   170→                  Documents {vehicle.documents?.length > 0 && `(${vehicle.documents.length})`}
   171→                </button>
   172→              </div>
   173→            </div>
   174→
   175→            {/* Content - Scrollable region with safe area padding */}
   176→            <div
   177→              className="p-4 md:p-6 space-y-4 md:space-y-6 flex-1 overflow-y-auto min-w-0"
   178→              style={{
   179→                paddingBottom: "calc(1.5rem + env(safe-area-inset-bottom, 0px))",
   180→              }}
   181→            >
   182→              {/* Overview Tab */}
   183→              {activeTab === "overview" && (
   184→                <div className="space-y-4">
   185→                  {/* Identity Section */}
   186→                  <div className="bg-slate-50 border border-slate-200 rounded-lg p-4">
   187→                    <h3 className="text-sm font-semibold text-slate-900 mb-3">Identity</h3>
   188→                    <div className="grid grid-cols-2 gap-3 text-sm">
   189→                      <div>
   190→                        <span className="text-slate-500">Registration:</span>
   191→                        <p className="font-mono font-semibold">{vehicle.regCurrent || "—"}</p>
   192→                      </div>
   193→                      <div>
   194→                        <span className="text-slate-500">VIN:</span>
   195→                        <p className="font-mono text-xs">{vehicle.vin || "—"}</p>
   196→                      </div>
   197→                    </div>
   198→                  </div>
   199→
   200→                  {/* Status Section */}
   201→                  <div className="bg-slate-50 border border-slate-200 rounded-lg p-4">
   202→                    <h3 className="text-sm font-semibold text-slate-900 mb-3">Status & Location</h3>
   203→                    <div className="grid grid-cols-2 gap-3 text-sm">
   204→                      <div>
   205→                        <span className="text-slate-500">Status:</span>
   206→                        <p className="font-medium">{STATUS_LABELS[vehicle.status] || vehicle.status}</p>
   207→                      </div>
   208→                      <div>
   209→                        <span className="text-slate-500">Location:</span>
   210→                        <p>{vehicle.locationId?.name || "On Site"}</p>
   211→                      </div>
   212→                      <div>
   213→                        <span className="text-slate-500">Vehicle Type:</span>
   214→                        <p>{vehicle.type || "Stock"}</p>
   215→                      </div>
   216→                      {(vehicle.type === "STOCK" || !vehicle.type) && (
   217→                        <div>
   218→                          <span className="text-slate-500">Sale Type:</span>
   219→                          <p>{vehicle.saleType || "Retail"}</p>
   220→                        </div>
   221→                      )}
   222→                    </div>
   223→                  </div>
   224→
   225→                  {/* Labels */}
   226→                  {vehicle.labels?.length > 0 && (
   227→                    <div className="bg-slate-50 border border-slate-200 rounded-lg p-4">
   228→                      <h3 className="text-sm font-semibold text-slate-900 mb-3">Labels</h3>
   229→                      <div className="flex flex-wrap gap-2">
   230→                        {vehicle.labels.map((label) => (
   231→                          <span
   232→                            key={label.id}
   233→                            className="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold"
   234→                            style={{
   235→                              backgroundColor: `${label.colour}20`,
   236→                              color: label.colour,
   237→                            }}
   238→                          >
   239→                            <span className="w-2 h-2 rounded-full" style={{ backgroundColor: label.colour }}></span>
   240→                            {label.name}
   241→                          </span>
   242→                        ))}
   243→                      </div>
   244→                    </div>
   245→                  )}
   246→
   247→                  {/* Specs Section */}
   248→                  <div className="bg-slate-50 border border-slate-200 rounded-lg p-4">
   249→                    <h3 className="text-sm font-semibold text-slate-900 mb-3">Specifications</h3>
   250→                    <div className="grid grid-cols-2 gap-3 text-sm">
   251→                      <div>
   252→                        <span className="text-slate-500">Make:</span>
   253→                        <p className="font-medium">{vehicle.make || "—"}</p>
   254→                      </div>
   255→                      <div>
   256→                        <span className="text-slate-500">Model:</span>
   257→                        <p className="font-medium">{vehicle.model || "—"}</p>
   258→                      </div>
   259→                      <div>
   260→                        <span className="text-slate-500">Year:</span>
   261→                        <p>{vehicle.year || "—"}</p>
   262→                      </div>
   263→                      <div>
   264→                        <span className="text-slate-500">Mileage:</span>
   265→                        <p>{vehicle.mileageCurrent ? `${vehicle.mileageCurrent.toLocaleString()} miles` : "—"}</p>
   266→                      </div>
   267→                      <div>
   268→                        <span className="text-slate-500">Colour:</span>
   269→                        <p>{vehicle.colour || "—"}</p>
   270→                      </div>
   271→                      <div>
   272→                        <span className="text-slate-500">Fuel Type:</span>
   273→                        <p>{vehicle.fuelType || "—"}</p>
   274→                      </div>
   275→                      <div className="col-span-2">
   276→                        <span className="text-slate-500">MOT Expiry:</span>
   277→                        <p>{vehicle.motExpiryDate ? formatDate(vehicle.motExpiryDate) : "—"}</p>
   278→                      </div>
   279→                    </div>
   280→                  </div>
   281→
   282→                  {/* V5 Document */}
   283→                  {vehicle.v5Url && (
   284→                    <div className="bg-slate-50 border border-slate-200 rounded-lg p-4">
   285→                      <h3 className="text-sm font-semibold text-slate-900 mb-3">V5 Document</h3>
   286→                      <a
   287→                        href={vehicle.v5Url}
   288→                        target="_blank"
   289→                        rel="noopener noreferrer"
   290→                        className="btn btn-sm btn-outline w-full"
   291→                      >
   292→                        View V5 Document
   293→                      </a>
   294→                    </div>
   295→                  )}
   296→
   297→                  {/* Notes */}
   298→                  {vehicle.notes && (
   299→                    <div className="bg-slate-50 border border-slate-200 rounded-lg p-4">
   300→                      <h3 className="text-sm font-semibold text-slate-900 mb-2">Notes</h3>
   301→                      <p className="text-sm whitespace-pre-wrap text-slate-600">{vehicle.notes}</p>
   302→                    </div>
   303→                  )}
   304→                </div>
   305→              )}
   306→
   307→              {/* Checklist Tab */}
   308→              {activeTab === "checklist" && (
   309→                <div className="bg-slate-50 border border-slate-200 rounded-lg p-4">
   310→                  <h3 className="text-sm font-semibold text-slate-900 mb-3">Prep Checklist</h3>
   311→                  {vehicle.tasks?.length > 0 ? (
   312→                    <div className="space-y-2">
   313→                      {vehicle.tasks.map((task) => (
   314→                        <div
   315→                          key={task.id}
   316→                          className="flex items-center gap-2 p-2 rounded bg-white border border-slate-100"
   317→                        >
   318→                          <span
   319→                            className={`badge badge-sm ${
   320→                              task.status === "done"
   321→                                ? "badge-success"
   322→                                : task.status === "in_progress"
   323→                                ? "badge-warning"
   324→                                : task.status === "not_required"
   325→                                ? "badge-ghost"
   326→                                : "badge-outline"
   327→                            }`}
   328→                          >
   329→                            {task.status === "done" && "Done"}
   330→                            {task.status === "in_progress" && "In Progress"}
   331→                            {task.status === "pending" && "Pending"}
   332→                            {task.status === "not_required" && "N/A"}
   333→                            {!task.status && "Pending"}
   334→                          </span>
   335→                          <span
   336→                            className={`flex-1 text-sm ${
   337→                              task.status === "done" ? "line-through text-slate-400" : ""
   338→                            }`}
   339→                          >
   340→                            {task.name}
   341→                          </span>
   342→                          {task.completedAt && (
   343→                            <span className="text-xs text-slate-400">
   344→                              {formatDate(task.completedAt)}
   345→                            </span>
   346→                          )}
   347→                        </div>
   348→                      ))}
   349→                    </div>
   350→                  ) : (
   351→                    <p className="text-sm text-slate-500 text-center py-4">No tasks</p>
   352→                  )}
   353→                </div>
   354→              )}
   355→
   356→              {/* Issues Tab */}
   357→              {activeTab === "issues" && (
   358→                <div className="space-y-4">
   359→                  {vehicle.issues?.length > 0 ? (
   360→                    vehicle.issues.map((issue) => (
   361→                      <div
   362→                        key={issue.id}
   363→                        className="bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden"
   364→                      >
   365→                        {/* Issue Card Header */}
   366→                        <div className="px-4 py-3 bg-slate-50/50 border-b border-slate-100">
   367→                          <div className="flex items-center justify-between gap-3">
   368→                            {/* Category & Subcategory Badges */}
   369→                            <div className="flex items-center gap-2 flex-wrap min-w-0">
   370→                              <span className="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-[#0066CC]/10 text-[#0066CC]">
   371→                                {issue.category}
   372→                              </span>
   373→                              {issue.subcategory && (
   374→                                <span className="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-600">
   375→                                  {issue.subcategory}
   376→                                </span>
   377→                              )}
   378→                            </div>
   379→                            {/* Status Badge */}
   380→                            <span
   381→                              className={`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold shrink-0 ${
   382→                                issue.status === "Complete"
   383→                                  ? "bg-emerald-100 text-emerald-700"
   384→                                  : issue.status === "In Progress"
   385→                                  ? "bg-amber-100 text-amber-700"
   386→                                  : issue.status === "Ordered"
   387→                                  ? "bg-blue-100 text-blue-700"
   388→                                  : "bg-red-100 text-red-700"
   389→                              }`}
   390→                            >
   391→                              {issue.status || "Outstanding"}
   392→                            </span>
   393→                          </div>
   394→                        </div>
   395→
   396→                        {/* Issue Card Body */}
   397→                        <div className="p-4 space-y-3">
   398→                          {/* Description */}
   399→                          <p className="text-sm font-medium text-slate-900">{issue.description}</p>
   400→
   401→                          {/* Details Grid */}
   402→                          <div className="space-y-2">
   403→                            {issue.actionNeeded && (
   404→                              <div className="flex items-start gap-2">
   405→                                <span className="text-xs font-semibold text-slate-400 uppercase tracking-wide shrink-0 pt-0.5">
   406→                                  Action
   407→                                </span>
   408→                                <p className="text-sm text-slate-600">{issue.actionNeeded}</p>
   409→                              </div>
   410→                            )}
   411→                            {issue.priority && (
   412→                              <div className="flex items-center gap-2">
   413→                                <span className="text-xs font-semibold text-slate-400 uppercase tracking-wide">
   414→                                  Priority
   415→                                </span>
   416→                                <span className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${
   417→                                  issue.priority === "high" ? "bg-red-50 text-red-700" :
   418→                                  issue.priority === "medium" ? "bg-amber-50 text-amber-700" :
   419→                                  "bg-slate-100 text-slate-600"
   420→                                }`}>
   421→                                  {issue.priority}
   422→                                </span>
   423→                              </div>
   424→                            )}
   425→                            {issue.location && (
   426→                              <div className="flex items-center gap-2">
   427→                                <span className="text-xs font-semibold text-slate-400 uppercase tracking-wide">
   428→                                  Location
   429→                                </span>
   430→                                <p className="text-sm text-slate-600">{issue.location}</p>
   431→                              </div>
   432→                            )}
   433→                            {issue.partsRequired && (
   434→                              <div className="flex items-start gap-2">
   435→                                <span className="text-xs font-semibold text-slate-400 uppercase tracking-wide shrink-0 pt-0.5">
   436→                                  Parts Details
   437→                                </span>
   438→                                <div>
   439→                                  <span className="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#0066CC]/10 text-[#0066CC] mb-1">
   440→                                    Required
   441→                                  </span>
   442→                                  {issue.partsDetails && (
   443→                                    <p className="text-sm text-slate-600">{issue.partsDetails}</p>
   444→                                  )}
   445→                                </div>
   446→                              </div>
   447→                            )}
   448→                            {issue.notes && (
   449→                              <div className="flex items-start gap-2">
   450→                                <span className="text-xs font-semibold text-slate-400 uppercase tracking-wide shrink-0 pt-0.5">
   451→                                  Notes
   452→                                </span>
   453→                                <p className="text-sm text-slate-600">{issue.notes}</p>
   454→                              </div>
   455→                            )}
   456→                          </div>
   457→
   458→                          {/* Photos */}
   459→                          {issue.photos?.length > 0 && (
   460→                            <div className="pt-2">
   461→                              <p className="text-xs font-semibold text-slate-400 uppercase tracking-wide mb-2">
   462→                                Photos ({issue.photos.length})
   463→                              </p>
   464→                              <div className="flex flex-wrap gap-2">
   465→                                {issue.photos.map((photo, idx) => (
   466→                                  <a
   467→                                    key={idx}
   468→                                    href={photo}
   469→                                    target="_blank"
   470→                                    rel="noopener noreferrer"
   471→                                    className="block"
   472→                                  >
   473→                                    <img
   474→                                      src={photo}
   475→                                      alt={`Issue photo ${idx + 1}`}
   476→                                      className="w-16 h-16 object-cover rounded-lg hover:opacity-90 hover:scale-105 transition-all border-2 border-slate-200 hover:border-[#0066CC]"
   477→                                    />
   478→                                  </a>
   479→                                ))}
   480→                              </div>
   481→                            </div>
   482→                          )}
   483→
   484→                          {/* Attachments */}
   485→                          {issue.attachments?.length > 0 && (
   486→                            <div className="pt-2">
   487→                              <p className="text-xs font-semibold text-slate-400 uppercase tracking-wide mb-2">
   488→                                Attachments ({issue.attachments.length})
   489→                              </p>
   490→                              <div className="flex flex-wrap gap-2">
   491→                                {issue.attachments.map((attachment, idx) => (
   492→                                  <a
   493→                                    key={idx}
   494→                                    href={attachment}
   495→                                    target="_blank"
   496→                                    rel="noopener noreferrer"
   497→                                    className="inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 hover:bg-slate-200 rounded-lg text-xs font-medium text-slate-700 transition-colors"
   498→                                  >
   499→                                    <svg className="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
   500→                                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13" />
   501→                                    </svg>
   502→                                    File {idx + 1}
   503→                                  </a>
   504→                                ))}
   505→                              </div>
   506→                            </div>
   507→                          )}
   508→                        </div>
   509→
   510→                        {/* Updates Accordion */}
   511→                        {issue.updates?.length > 0 && (
   512→                          <div className="border-t border-slate-100">
   513→                            <button
   514→                              className="w-full flex items-center justify-between px-4 py-2.5 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors"
   515→                              onClick={() =>
   516→                                setExpandedIssues((prev) => ({
   517→                                  ...prev,
   518→                                  [issue.id]: !prev[issue.id],
   519→                                }))
   520→                              }
   521→                            >
   522→                              <span className="flex items-center gap-2">
   523→                                <svg className="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
   524→                                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
   525→                                </svg>
   526→                                {issue.updates.length} Update{issue.updates.length !== 1 ? "s" : ""}
   527→                              </span>
   528→                              <svg
   529→                                className={`w-4 h-4 text-slate-400 transition-transform duration-200 ${
   530→                                  expandedIssues[issue.id] ? "rotate-180" : ""
   531→                                }`}
   532→                                fill="none"
   533→                                stroke="currentColor"
   534→                                viewBox="0 0 24 24"
   535→                              >
   536→                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
   537→                              </svg>
   538→                            </button>
   539→
   540→                            {expandedIssues[issue.id] && (
   541→                              <div className="px-4 pb-4 space-y-3 bg-slate-50/50">
   542→                                {issue.updates.map((update, idx) => (
   543→                                  <div
   544→                                    key={idx}
   545→                                    className="pl-4 border-l-2 border-[#0066CC]/30"
   546→                                  >
   547→                                    <div className="flex items-center gap-2 mb-1">
   548→                                      <p className="text-sm font-semibold text-slate-700">
   549→                                        {update.userName || "User"}
   550→                                      </p>
   551→                                      <span className="text-xs text-slate-400">
   552→                                        {formatDate(update.createdAt)}
   553→                                      </span>
   554→                                    </div>
   555→                                    <p className="text-sm text-slate-600">{update.content}</p>
   556→                                  </div>
   557→                                ))}
   558→                              </div>
   559→                            )}
   560→                          </div>
   561→                        )}
   562→                      </div>
   563→                    ))
   564→                  ) : (
   565→                    <div className="bg-white border border-slate-200 rounded-2xl p-8 text-center shadow-sm">
   566→                      <div className="w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-3">
   567→                        <svg className="w-6 h-6 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
   568→                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
   569→                        </svg>
   570→                      </div>
   571→                      <p className="text-sm font-medium text-slate-600">No issues recorded</p>
   572→                      <p className="text-xs text-slate-400 mt-1">This vehicle has no reported issues</p>
   573→                    </div>
   574→                  )}
   575→                </div>
   576→              )}
   577→
   578→              {/* Documents Tab */}
   579→              {activeTab === "documents" && (
   580→                <div className="space-y-3">
   581→                  {vehicle.documents?.length > 0 ? (
   582→                    vehicle.documents.map((doc) => (
   583→                      <div
   584→                        key={doc.id}
   585→                        className="bg-slate-50 border border-slate-200 rounded-lg p-4 flex justify-between items-center"
   586→                      >
   587→                        <div>
   588→                          <p className="text-sm font-medium">{doc.name}</p>
   589→                          <span className="badge badge-sm badge-ghost mt-1">
   590→                            {doc.type === "v5" && "V5"}
   591→                            {doc.type === "service_history" && "Service History"}
   592→                            {doc.type === "fault_codes" && "Fault Codes"}
   593→                            {doc.type === "other" && "Other"}
   594→                          </span>
   595→                        </div>
   596→                        <a
   597→                          href={doc.url}
   598→                          target="_blank"
   599→                          rel="noopener noreferrer"
   600→                          className="btn btn-ghost btn-sm"
   601→                        >
   602→                          View
   603→                        </a>
   604→                      </div>
   605→                    ))
   606→                  ) : (
   607→                    <div className="bg-slate-50 border border-slate-200 rounded-lg p-8 text-center">
   608→                      <p className="text-sm text-slate-500">No documents uploaded</p>
   609→                    </div>
   610→                  )}
   611→                </div>
   612→              )}
   613→            </div>
   614→          </>
   615→        )}
   616→      </div>
   617→    </div>
   618→  );
   619→}
   620→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
