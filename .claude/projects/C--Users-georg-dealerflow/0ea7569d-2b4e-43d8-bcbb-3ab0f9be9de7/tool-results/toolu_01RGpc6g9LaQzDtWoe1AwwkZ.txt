The file C:\Users\georg\dealerflow\pages\api\deals\[id].js has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
    18→  if (!id || !id.match(/^[0-9a-fA-F]{24}$/)) {
    19→    return res.status(400).json({ error: "Invalid deal ID" });
    20→  }
    21→
    22→  if (req.method === "GET") {
    23→    const deal = await Deal.findOne({ _id: id, dealerId })
    24→      .populate("vehicleId")
    25→      .populate("soldToContactId")
    26→      .populate("invoiceToContactId")
    27→      .populate("salesPersonId", "name email")
    28→      .populate("partExchangeId")
    29→      .lean();
    30→
    31→    if (!deal) {
    32→      return res.status(404).json({ error: "Deal not found" });
    33→    }
    34→
    35→    return res.status(200).json({
    36→      ...deal,
    37→      id: deal._id.toString(),
    38→      vehicle: deal.vehicleId,
    39→      customer: deal.soldToContactId,
    40→      invoiceTo: deal.invoiceToContactId,
    41→      salesPerson: deal.salesPersonId,
    42→      partExchange: deal.partExchangeId,
    43→      _id: undefined,
    44→      __v: undefined,
    45→    });
    46→  }
    47→
    48→  if (req.method === "PUT") {
    49→    const deal = await Deal.findOne({ _id: id, dealerId });
    50→    if (!deal) {