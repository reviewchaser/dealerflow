  1200→                              >
  1201→                                {opt.label}
  1202→                              </button>
  1203→                            ))}
  1204→                          </div>
  1205→                          <p className="text-xs text-slate-400 mt-2">Select the planned settlement method (not payments received)</p>
  1206→                        </div>
  1207→
  1208→                        {/* Finance Details - shown when paymentType is FINANCE or MIXED */}
  1209→                        {(deal.paymentType === "FINANCE" || deal.paymentType === "MIXED") && (
  1210→                          <div className="border-t border-slate-100 pt-4 space-y-3">
  1211→                            <h4 className="text-xs font-semibold text-slate-500 uppercase tracking-wide">Finance Details</h4>
  1212→                            <div className="grid grid-cols-2 gap-3">
  1213→                              <div>
  1214→                                <label className="block text-xs text-slate-500 mb-1">Provider</label>
  1215→                                <input
  1216→                                  type="text"
  1217→                                  className="input input-sm input-bordered w-full"
  1218→                                  placeholder="Finance company"
  1219→                                  value={deal.finance?.provider || ""}
  1220→                                  onChange={(e) => handleUpdateField({
  1221→                                    finance: { ...deal.finance, provider: e.target.value }
  1222→                                  })}
  1223→                                />
  1224→                              </div>
  1225→                              <div>
  1226→                                <label className="block text-xs text-slate-500 mb-1">Finance Type</label>
  1227→                                <select
  1228→                                  className="select select-sm select-bordered w-full"
  1229→                                  value={deal.finance?.financeType || ""}
  1230→                                  onChange={(e) => handleUpdateField({
  1231→                                    finance: { ...deal.finance, financeType: e.target.value }
  1232→                                  })}
  1233→                                >
  1234→                                  <option value="">Select...</option>
  1235→                                  {FINANCE_TYPE_OPTIONS.map((opt) => (
  1236→                                    <option key={opt.value} value={opt.value}>{opt.label}</option>
  1237→                                  ))}
  1238→                                </select>
  1239→                              </div>
  1240→                              <div>
  1241→                                <label className="block text-xs text-slate-500 mb-1">Amount Financed</label>
  1242→                                <div className="relative">
  1243→                                  <span className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm">£</span>
  1244→                                  <input
  1245→                                    type="number"
  1246→                                    className="input input-sm input-bordered w-full pl-7"
  1247→                                    placeholder="0.00"
  1248→                                    value={deal.finance?.amountFinanced || ""}
  1249→                                    onChange={(e) => handleUpdateField({
  1250→                                      finance: { ...deal.finance, amountFinanced: parseFloat(e.target.value) || null }
  1251→                                    })}
  1252→                                  />
  1253→                                </div>
  1254→                              </div>
  1255→                              <div>
  1256→                                <label className="block text-xs text-slate-500 mb-1">Customer Deposit</label>
  1257→                                <div className="relative">
  1258→                                  <span className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm">£</span>
  1259→                                  <input
  1260→                                    type="number"
  1261→                                    className="input input-sm input-bordered w-full pl-7"
  1262→                                    placeholder="0.00"
  1263→                                    value={deal.finance?.customerDeposit || ""}
  1264→                                    onChange={(e) => handleUpdateField({
  1265→                                      finance: { ...deal.finance, customerDeposit: parseFloat(e.target.value) || null }
  1266→                                    })}
  1267→                                  />
  1268→                                </div>
  1269→                              </div>
  1270→                              <div>
  1271→                                <label className="block text-xs text-slate-500 mb-1">Status</label>
  1272→                                <select
  1273→                                  className="select select-sm select-bordered w-full"
  1274→                                  value={deal.finance?.status || "QUOTED"}
  1275→                                  onChange={(e) => handleUpdateField({
  1276→                                    finance: { ...deal.finance, status: e.target.value }
  1277→                                  })}
  1278→                                >
  1279→                                  {FINANCE_STATUS_OPTIONS.map((opt) => (
  1280→                                    <option key={opt.value} value={opt.value}>{opt.label}</option>
  1281→                                  ))}
  1282→                                </select>
  1283→                              </div>
  1284→                              <div>
  1285→                                <label className="block text-xs text-slate-500 mb-1">Reference</label>
  1286→                                <input
  1287→                                  type="text"
  1288→                                  className="input input-sm input-bordered w-full"
  1289→                                  placeholder="Agreement ref"
  1290→                                  value={deal.finance?.reference || ""}
  1291→                                  onChange={(e) => handleUpdateField({
  1292→                                    finance: { ...deal.finance, reference: e.target.value }
  1293→                                  })}
  1294→                                />
  1295→                              </div>
  1296→                            </div>
  1297→                          </div>
  1298→                        )}
  1299→                      </div>
  1300→                    </div>
  1301→                  )}
  1302→
  1303→                  {/* Vehicle Section */}
  1304→                  {deal.vehicle && (
  1305→                    <div className="bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden">
  1306→                      <div className="px-4 py-3 bg-gradient-to-r from-slate-50 to-white border-b border-slate-100">
  1307→                        <div className="flex items-center gap-2">
  1308→                          <div className="w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center">
  1309→                            <svg className="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1310→                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7h8m-8 5h8m-4-9a9 9 0 110 18 9 9 0 010-18z" />
  1311→                            </svg>
  1312→                          </div>
  1313→                          <h3 className="text-sm font-bold text-slate-800">Vehicle</h3>
  1314→                        </div>
  1315→                      </div>
  1316→                      <div className="p-4">
  1317→                        <div className="flex items-start gap-4">
  1318→                          {deal.vehicle.primaryImageUrl && (
  1319→                            <img
  1320→                              src={deal.vehicle.primaryImageUrl}
  1321→                              alt={`${deal.vehicle.make} ${deal.vehicle.model}`}
  1322→                              className="w-20 h-20 object-cover rounded-xl"
  1323→                            />
  1324→                          )}
  1325→                          <div className="flex-1">
  1326→                            <p className="font-semibold text-slate-900">
  1327→                              {deal.vehicle.year} {deal.vehicle.make} {deal.vehicle.model}
  1328→                            </p>
  1329→                            <p className="text-sm text-slate-500 mt-1">
  1330→                              {deal.vehicle.regCurrent}
  1331→                            </p>
  1332→                          </div>
  1333→                        </div>
  1334→                      </div>
  1335→                    </div>
  1336→                  )}
  1337→
  1338→                  {/* Next Actions */}
  1339→                  {deal.status !== "COMPLETED" && deal.status !== "CANCELLED" && (
  1340→                    <div className="bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden">
  1341→                      <div className="px-4 py-3 bg-gradient-to-r from-blue-50 to-white border-b border-slate-100">
  1342→                        <div className="flex items-center gap-2">
  1343→                          <div className="w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center">
  1344→                            <svg className="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1345→                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
  1346→                            </svg>
  1347→                          </div>
  1348→                          <h3 className="text-sm font-bold text-slate-800">Next Actions</h3>
  1349→                        </div>
  1350→                      </div>
  1351→                      <div className="p-4 space-y-4">
  1352→                        {/* Take Deposit - for Draft or Deposit_Taken status */}
  1353→                        {(deal.status === "DRAFT" || deal.status === "DEPOSIT_TAKEN") && (() => {
  1354→                          const { allowed, reasons } = canTakeDeposit();
  1355→                          return (
  1356→                            <div className="space-y-2">
  1357→                              <div className="flex items-center justify-between">
  1358→                                <span className="text-sm font-medium text-slate-700">Take Deposit</span>
  1359→                                {deal.status === "DEPOSIT_TAKEN" && (
  1360→                                  <span className="text-xs text-emerald-600 font-medium">Additional deposit</span>
  1361→                                )}
  1362→                              </div>
  1363→                              {deal.status === "DRAFT" && !allowed && reasons.length > 0 && (
  1364→                                <div className="bg-amber-50 border border-amber-200 rounded-xl p-3">
  1365→                                  <p className="text-xs font-medium text-amber-800 mb-1.5">Required:</p>
  1366→                                  <ul className="space-y-1">
  1367→                                    {reasons.map((r, i) => (
  1368→                                      <li key={i} className="text-xs text-amber-700 flex items-center gap-1.5">
  1369→                                        <svg className="w-3 h-3 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1370→                                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
  1371→                                        </svg>
  1372→                                        {r}
  1373→                                      </li>
  1374→                                    ))}
  1375→                                  </ul>
  1376→                                </div>
  1377→                              )}
  1378→                              <button
  1379→                                onClick={() => (allowed || deal.status === "DEPOSIT_TAKEN") && setShowDepositModal(true)}
  1380→                                disabled={actionLoading || (deal.status === "DRAFT" && !allowed)}
  1381→                                className={`btn btn-sm w-full border-none ${
  1382→                                  allowed || deal.status === "DEPOSIT_TAKEN"
  1383→                                    ? "bg-amber-500 hover:bg-amber-600 text-white"
  1384→                                    : "bg-slate-200 text-slate-400 cursor-not-allowed"
  1385→                                }`}
  1386→                              >
  1387→                                {actionLoading === "deposit" ? (
  1388→                                  <span className="loading loading-spinner loading-xs"></span>
  1389→                                ) : (
  1390→                                  <>
  1391→                                    <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1392→                                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1" />
  1393→                                    </svg>
  1394→                                    {deal.status === "DEPOSIT_TAKEN" ? "Take Additional Deposit" : "Take Deposit"}
  1395→                                  </>
  1396→                                )}
  1397→                              </button>
  1398→                            </div>
  1399→                          );
  1400→                        })()}
  1401→
  1402→                        {/* Generate Invoice */}
  1403→                        {(deal.status === "DRAFT" || deal.status === "DEPOSIT_TAKEN") && (() => {
  1404→                          const { allowed, reasons } = canGenerateInvoice();
  1405→                          return (
  1406→                            <div className="space-y-2 pt-2 border-t border-slate-100">
  1407→                              <div className="flex items-center justify-between">
  1408→                                <span className="text-sm font-medium text-slate-700">Generate Invoice</span>
  1409→                                {deal.status === "DRAFT" && (
  1410→                                  <span className="text-xs text-slate-400">Invoice-first supported</span>
  1411→                                )}
  1412→                              </div>
  1413→                              {!allowed && reasons.length > 0 && !reasons.includes("Invoice already generated") && (
  1414→                                <div className="bg-blue-50 border border-blue-200 rounded-xl p-3">
  1415→                                  <p className="text-xs font-medium text-blue-800 mb-1.5">Required:</p>
  1416→                                  <ul className="space-y-1">
  1417→                                    {reasons.map((r, i) => (
  1418→                                      <li key={i} className="text-xs text-blue-700 flex items-center gap-1.5">
  1419→                                        <svg className="w-3 h-3 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1420→                                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
  1421→                                        </svg>
  1422→                                        {r}
  1423→                                      </li>
  1424→                                    ))}
  1425→                                  </ul>
  1426→                                </div>
  1427→                              )}
  1428→                              <button
  1429→                                onClick={() => allowed && handleGenerateInvoice()}
  1430→                                disabled={actionLoading || !allowed}
  1431→                                className={`btn btn-sm w-full border-none ${
  1432→                                  allowed
  1433→                                    ? "bg-blue-500 hover:bg-blue-600 text-white"
  1434→                                    : "bg-slate-200 text-slate-400 cursor-not-allowed"
  1435→                                }`}
  1436→                              >
  1437→                                {actionLoading === "invoice" ? (
  1438→                                  <span className="loading loading-spinner loading-xs"></span>
  1439→                                ) : (
  1440→                                  <>
  1441→                                    <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1442→                                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
  1443→                                    </svg>
  1444→                                    Generate Invoice
  1445→                                  </>
  1446→                                )}
  1447→                              </button>
  1448→                            </div>
  1449→                          );
  1450→                        })()}
  1451→
  1452→                        {/* Mark Delivered */}
  1453→                        {deal.status === "INVOICED" && (
  1454→                          <button
  1455→                            onClick={handleMarkDelivered}
  1456→                            disabled={actionLoading}
  1457→                            className="btn btn-sm w-full bg-purple-500 hover:bg-purple-600 text-white border-none"
  1458→                          >
  1459→                            {actionLoading === "delivered" ? (
  1460→                              <span className="loading loading-spinner loading-xs"></span>
  1461→                            ) : (
  1462→                              <>
  1463→                                <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1464→                                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
  1465→                                </svg>
  1466→                                Mark Delivered
  1467→                              </>
  1468→                            )}
  1469→                          </button>
  1470→                        )}
  1471→
  1472→                        {/* Complete Deal */}
  1473→                        {deal.status === "DELIVERED" && (
  1474→                          <button
  1475→                            onClick={handleMarkCompleted}
  1476→                            disabled={actionLoading}
  1477→                            className="btn btn-sm w-full bg-emerald-500 hover:bg-emerald-600 text-white border-none"
  1478→                          >
  1479→                            {actionLoading === "completed" ? (
  1480→                              <span className="loading loading-spinner loading-xs"></span>
  1481→                            ) : (
  1482→                              <>
  1483→                                <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1484→                                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
  1485→                                </svg>
  1486→                                Complete Deal
  1487→                              </>
  1488→                            )}
  1489→                          </button>
  1490→                        )}
  1491→
  1492→                        {/* Delete/Cancel actions */}
  1493→                        <div className="pt-2 border-t border-slate-100">
  1494→                          {deal.status === "DRAFT" ? (
  1495→                            <button
  1496→                              onClick={() => setShowDeleteConfirm(true)}
  1497→                              disabled={actionLoading}
  1498→                              className="btn btn-sm btn-ghost w-full text-red-500 hover:bg-red-50"
  1499→                            >
  1500→                              Delete Draft
  1501→                            </button>
  1502→                          ) : (
  1503→                            <button
  1504→                              onClick={handleCancelDeal}
  1505→                              disabled={actionLoading}
  1506→                              className="btn btn-sm btn-ghost w-full text-red-500 hover:bg-red-50"
  1507→                            >
  1508→                              Cancel Deal
  1509→                            </button>
  1510→                          )}
  1511→                        </div>
  1512→                      </div>
  1513→                    </div>
  1514→                  )}
  1515→
  1516→                  {/* Pricing Summary */}
  1517→                  <div className="bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden">
  1518→                    <div className="px-4 py-3 bg-gradient-to-r from-slate-50 to-white border-b border-slate-100">
  1519→                      <div className="flex items-center justify-between">
  1520→                        <div className="flex items-center gap-2">
  1521→                          <div className="w-8 h-8 rounded-lg bg-emerald-100 flex items-center justify-center">
  1522→                            <svg className="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1523→                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
  1524→                            </svg>
  1525→                          </div>
  1526→                          <h3 className="text-sm font-bold text-slate-800">Pricing</h3>
  1527→                        </div>
  1528→                        <span className={`inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium ${
  1529→                          deal.vatScheme === "VAT_QUALIFYING"
  1530→                            ? "bg-blue-100 text-blue-700"
  1531→                            : "bg-slate-100 text-slate-600"
  1532→                        }`}>
  1533→                          {VAT_SCHEME_LABELS[deal.vatScheme] || deal.vatScheme}
  1534→                        </span>
  1535→                      </div>
  1536→                    </div>
  1537→                    <div className="p-4 space-y-3">
  1538→                      {/* Vehicle Price - Editable for Draft */}
  1539→                      <div className="flex justify-between items-center">
  1540→                        <span className="text-sm text-slate-600">Vehicle</span>
  1541→                        {deal.status === "DRAFT" && isEditingPrice ? (
  1542→                          <div className="flex items-center gap-2">
  1543→                            <div className="relative w-28">
  1544→                              <span className="absolute left-2 top-1/2 -translate-y-1/2 text-slate-400 text-sm">£</span>
  1545→                              <input
  1546→                                type="number"
  1547→                                step="0.01"
  1548→                                className="input input-sm input-bordered w-full pl-6 pr-2 text-right"
  1549→                                value={priceInput}
  1550→                                onChange={(e) => setPriceInput(e.target.value)}
  1551→                                onKeyDown={(e) => {
  1552→                                  if (e.key === "Enter") handleUpdatePrice();
  1553→                                  if (e.key === "Escape") setIsEditingPrice(false);
  1554→                                }}
  1555→                                autoFocus
  1556→                              />
  1557→                            </div>
  1558→                            <button
  1559→                              onClick={handleUpdatePrice}
  1560→                              disabled={actionLoading === "field"}
  1561→                              className="btn btn-xs btn-ghost text-emerald-600"
  1562→                            >
  1563→                              ✓
  1564→                            </button>
  1565→                            <button
  1566→                              onClick={() => setIsEditingPrice(false)}
  1567→                              className="btn btn-xs btn-ghost text-slate-400"
  1568→                            >
  1569→                              ✕
  1570→                            </button>
  1571→                          </div>
  1572→                        ) : (
  1573→                          <div className="flex items-center gap-2">
  1574→                            <span className="font-semibold text-slate-900">
  1575→                              {deal.vehiclePriceGross > 0
  1576→                                ? formatCurrency(deal.vehiclePriceGross)
  1577→                                : "—"}
  1578→                            </span>
  1579→                            {deal.status === "DRAFT" && (
  1580→                              <button
  1581→                                onClick={() => {
  1582→                                  setPriceInput(deal.vehiclePriceGross?.toString() || "");
  1583→                                  setIsEditingPrice(true);
  1584→                                }}
  1585→                                className="btn btn-xs btn-ghost text-[#0066CC]"
  1586→                              >
  1587→                                Edit
  1588→                              </button>
  1589→                            )}
  1590→                          </div>
  1591→                        )}
  1592→                      </div>
  1593→
  1594→                      {/* Show net + VAT breakdown for VAT Qualifying */}
  1595→                      {deal.vatScheme === "VAT_QUALIFYING" && deal.vehiclePriceGross > 0 && (
  1596→                        <div className="text-xs text-slate-500 text-right">
  1597→                          Net: {formatCurrency(deal.vehiclePriceNet)} + VAT: {formatCurrency(deal.vehicleVatAmount)}
  1598→                        </div>
  1599→                      )}
  1600→
  1601→                      {/* Add-ons */}
  1602→                      {totals.addOnsNetTotal > 0 && (
  1603→                        <div className="flex justify-between items-center">
  1604→                          <span className="text-sm text-slate-600">Add-ons</span>
  1605→                          <span className="font-semibold text-slate-900">
  1606→                            {formatCurrency(totals.addOnsNetTotal)}
  1607→                          </span>
  1608→                        </div>
  1609→                      )}
  1610→
  1611→                      {/* VAT (only for VAT Qualifying) */}
  1612→                      {deal.vatScheme === "VAT_QUALIFYING" && totals.totalVat > 0 && (
  1613→                        <div className="flex justify-between items-center">
  1614→                          <span className="text-sm text-slate-600">VAT @ 20%</span>
  1615→                          <span className="font-semibold text-slate-900">
  1616→                            {formatCurrency(totals.totalVat)}
  1617→                          </span>
  1618→                        </div>
  1619→                      )}
  1620→
  1621→                      <div className="border-t border-slate-100 pt-3">
  1622→                        <div className="flex justify-between items-center">
  1623→                          <span className="text-sm font-semibold text-slate-700">Total</span>
  1624→                          <span className="text-lg font-bold text-slate-900">
  1625→                            {formatCurrency(totals.grandTotal)}
  1626→                          </span>
  1627→                        </div>
  1628→                      </div>
  1629→
  1630→                      {/* Part Exchange */}
  1631→                      {totals.pxNetValue > 0 && (
  1632→                        <div className="flex justify-between items-center text-emerald-600">
  1633→                          <span className="text-sm">Part Exchange</span>
  1634→                          <span className="font-semibold">-{formatCurrency(totals.pxNetValue)}</span>
  1635→                        </div>
  1636→                      )}
  1637→
  1638→                      {/* Payments */}
  1639→                      {totals.totalPaid > 0 && (
  1640→                        <div className="flex justify-between items-center text-emerald-600">
  1641→                          <span className="text-sm">Paid</span>
  1642→                          <span className="font-semibold">-{formatCurrency(totals.totalPaid)}</span>
  1643→                        </div>
  1644→                      )}
  1645→
  1646→                      {/* Balance Due */}
  1647→                      <div className="border-t border-slate-100 pt-3">
  1648→                        <div className="flex justify-between items-center">
  1649→                          <span className="text-sm font-semibold text-slate-700">Balance Due</span>
  1650→                          <span className={`text-lg font-bold ${
  1651→                            totals.balanceDue <= 0 ? "text-emerald-600" : "text-slate-900"
  1652→                          }`}>
  1653→                            {formatCurrency(Math.max(0, totals.balanceDue))}
  1654→                          </span>
  1655→                        </div>
  1656→                      </div>
  1657→                    </div>
  1658→                  </div>
  1659→
  1660→                  {/* Timeline */}
  1661→                  <div className="bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden">
  1662→                    <div className="px-4 py-3 bg-gradient-to-r from-slate-50 to-white border-b border-slate-100">
  1663→                      <div className="flex items-center gap-2">
  1664→                        <div className="w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center">
  1665→                          <svg className="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1666→                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
  1667→                          </svg>
  1668→                        </div>
  1669→                        <h3 className="text-sm font-bold text-slate-800">Timeline</h3>
  1670→                      </div>
  1671→                    </div>
  1672→                    <div className="p-4 space-y-3 text-sm">
  1673→                      <div className="flex justify-between">
  1674→                        <span className="text-slate-500">Created</span>
  1675→                        <span className="text-slate-900">{formatDateTime(deal.createdAt)}</span>
  1676→                      </div>
  1677→                      {deal.depositTakenAt && (
  1678→                        <div className="flex justify-between">
  1679→                          <span className="text-slate-500">Deposit Taken</span>
  1680→                          <span className="text-slate-900">{formatDateTime(deal.depositTakenAt)}</span>
  1681→                        </div>
  1682→                      )}
  1683→                      {deal.invoicedAt && (
  1684→                        <div className="flex justify-between">
  1685→                          <span className="text-slate-500">Invoiced</span>
  1686→                          <span className="text-slate-900">{formatDateTime(deal.invoicedAt)}</span>
  1687→                        </div>
  1688→                      )}
  1689→                      {deal.deliveredAt && (
  1690→                        <div className="flex justify-between">
  1691→                          <span className="text-slate-500">Delivered</span>
  1692→                          <span className="text-slate-900">{formatDateTime(deal.deliveredAt)}</span>
  1693→                        </div>
  1694→                      )}
  1695→                      {deal.completedAt && (
  1696→                        <div className="flex justify-between">
  1697→                          <span className="text-slate-500">Completed</span>
  1698→                          <span className="text-slate-900">{formatDateTime(deal.completedAt)}</span>
  1699→                        </div>

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
