  1775→      {/* Consolidated Filters */}
  1776→      <div className="sticky top-0 z-20 bg-white/80 backdrop-blur-md border-b border-slate-200 mb-4 -mx-6 px-6 py-3">
  1777→        <div className="flex gap-2 items-center overflow-x-auto scrollbar-hide pb-1 -mb-1">
  1778→            {/* VRM Search */}
  1779→            <div className="relative shrink-0">
  1780→              <div className="relative">
  1781→                <svg className="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1782→                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
  1783→                </svg>
  1784→                <input
  1785→                  ref={vrmSearchInputRef}
  1786→                  type="text"
  1787→                  placeholder="Search VRM..."
  1788→                  className="input input-sm input-bordered pl-9 pr-8 w-32 sm:w-48 font-mono uppercase"
  1789→                  value={vrmSearch}
  1790→                  onChange={(e) => handleVrmSearchChange(e.target.value)}
  1791→                  onFocus={() => {
  1792→                    if (vrmSearch.length >= 2) {
  1793→                      setShowVrmDropdown(true);
  1794→                    }
  1795→                  }}
  1796→                  onKeyDown={handleVrmKeyDown}
  1797→                />
  1798→                {vrmSearch && (
  1799→                  <button
  1800→                    className="absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600"
  1801→                    onClick={clearVrmFilter}
  1802→                  >
  1803→                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1804→                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
  1805→                    </svg>
  1806→                  </button>
  1807→                )}
  1808→              </div>
  1809→            </div>
  1810→
  1811→            <div className="divider divider-horizontal mx-1 shrink-0 hidden sm:flex"></div>
  1812→
  1813→            {/* All Vehicles Button */}
  1814→            <button
  1815→              className={`btn btn-sm shrink-0 ${activeFilters.length === 0 ? "btn-primary" : "btn-outline"}`}
  1816→              onClick={() => setActiveFilters([])}
  1817→            >
  1818→              <span className="hidden sm:inline">All Vehicles</span>
  1819→              <span className="sm:hidden">All</span>
  1820→              <span className="text-xs opacity-70">({vehicles.length})</span>
  1821→            </button>
  1822→
  1823→            <div className="divider divider-horizontal mx-1 shrink-0 hidden sm:flex"></div>
  1824→
  1825→            {/* Consolidated Filters - Strictly Separated Desktop/Mobile */}
  1826→            <div className="shrink-0">
  1827→              {/* Trigger Button */}
  1828→              <button
  1829→                ref={filterButtonRef}
  1830→                className={`flex items-center gap-2 px-3 py-2 rounded-lg shrink-0 whitespace-nowrap text-sm font-medium transition-all ${
  1831→                  activeFilters.length > 0
  1832→                    ? "bg-blue-600 text-white"
  1833→                    : "bg-white border border-slate-200 text-slate-700 hover:border-slate-300"
  1834→                }`}
  1835→                onClick={() => showFiltersDropdown ? setShowFiltersDropdown(false) : openFiltersDropdown()}
  1836→              >
  1837→                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1838→                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
  1839→                </svg>
  1840→                <span className="hidden sm:inline">Filters</span>
  1841→                {activeFilters.length > 0 && (
  1842→                  <span className={`text-xs px-1.5 py-0.5 rounded-full ${
  1843→                    activeFilters.length > 0 ? "bg-white/20 text-white" : "bg-slate-100 text-slate-600"
  1844→                  }`}>{activeFilters.length}</span>
  1845→                )}
  1846→              </button>
  1847→
  1848→              {/* ═══════════════════════════════════════════════════════════════ */}
  1849→              {/* DESKTOP: Fixed Popover via Portal (lg: and up) */}
  1850→              {/* ═══════════════════════════════════════════════════════════════ */}
  1851→              {showFiltersDropdown && (
  1852→                <Portal>
  1853→                  <div className="hidden lg:block fixed inset-0 z-[9998]">
  1854→                    {/* Backdrop */}

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
