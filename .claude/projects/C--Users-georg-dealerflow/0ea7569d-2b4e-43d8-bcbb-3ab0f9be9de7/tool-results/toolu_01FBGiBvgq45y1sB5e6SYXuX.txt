     1→import { useEffect, useState, useRef } from "react";
     2→import { useRouter } from "next/router";
     3→import Head from "next/head";
     4→import DashboardLayout from "@/components/DashboardLayout";
     5→import VehicleDrawer from "@/components/VehicleDrawer";
     6→import AISuggestionsPanel from "@/components/AISuggestionsPanel";
     7→import { BottomSheet } from "@/components/ui/BottomSheet";
     8→import { MobileStageSelector } from "@/components/ui/PageShell";
     9→import { toast } from "react-hot-toast";
    10→import useDealerRedirect from "@/hooks/useDealerRedirect";
    11→
    12→// Column config matching Sales & Prep style
    13→// NOTE: Internal keys are legacy names - keep stable for database compatibility
    14→// Display labels have been updated for clarity
    15→const COLUMNS = [
    16→  { key: "not_booked_in", label: "Not Booked In", gradient: "from-red-100/60", accent: "border-l-red-400", accentBg: "bg-red-400" },
    17→  { key: "on_site", label: "Booked In", gradient: "from-amber-100/60", accent: "border-l-amber-400", accentBg: "bg-amber-400" }, // Legacy key: "on_site" displays as "Booked In"
    18→  { key: "work_complete", label: "Work Complete", gradient: "from-blue-100/60", accent: "border-l-blue-400", accentBg: "bg-blue-400" },
    19→  { key: "collected", label: "Closed", gradient: "from-emerald-100/60", accent: "border-l-emerald-400", accentBg: "bg-emerald-400" }, // Legacy key: "collected" displays as "Closed"
    20→];
    21→
    22→const PRIORITIES = {
    23→  low: { bg: "bg-slate-100", text: "text-slate-600", border: "border-slate-200" },
    24→  normal: { bg: "bg-blue-50", text: "text-blue-700", border: "border-blue-100" },
    25→  high: { bg: "bg-amber-50", text: "text-amber-700", border: "border-amber-100" },
    26→  critical: { bg: "bg-red-50", text: "text-red-700", border: "border-red-100" },
    27→};
    28→
    29→const SOURCE_LABELS = {
    30→  warranty_claim_form: "Warranty Claim",
    31→  low_review: "Low Review",
    32→  complaint_form: "Complaint",
    33→  manual: "Manual",
    34→};
    35→
    36→// Timeline event styling - using SVG icons for consistency
    37→const TIMELINE_STYLES = {
    38→  // System events - very subtle (low visual weight)
    39→  CASE_CREATED: {
    40→    color: "text-slate-300",
    41→    bg: "bg-transparent",
    42→    border: "border-slate-100",
    43→    label: "Case Created",
    44→    subtle: true
    45→  },
    46→  STATUS_CHANGED: {
    47→    color: "text-slate-400",
    48→    bg: "bg-transparent",
    49→    border: "border-slate-100",
    50→    label: "Status Changed",
    51→    subtle: true
    52→  },
    53→  WARRANTY_STAGE_MOVED: {
    54→    color: "text-slate-400",
    55→    bg: "bg-transparent",
    56→    border: "border-slate-100",
    57→    label: "Stage Updated",
    58→    subtle: true
    59→  },
    60→  // Booking events - moderate emphasis
    61→  BOOKING_UPDATED: {
    62→    color: "text-amber-400",
    63→    bg: "bg-amber-50/50",
    64→    border: "border-amber-100",
    65→    label: "Booking Updated"
    66→  },
    67→  WARRANTY_BOOKED_IN: {
    68→    color: "text-amber-400",
    69→    bg: "bg-amber-50/50",
    70→    border: "border-amber-100",
    71→    label: "Booking Set"
    72→  },
    73→  WARRANTY_BOOKING_UPDATED: {
    74→    color: "text-amber-400",
    75→    bg: "bg-amber-50/50",
    76→    border: "border-amber-100",
    77→    label: "Booking Changed"
    78→  },
    79→  WARRANTY_BOOKING_CANCELLED: {
    80→    color: "text-red-400",
    81→    bg: "bg-red-50/50",
    82→    border: "border-red-100",
    83→    label: "Booking Cancelled"
    84→  },
    85→  // Dealer activity - HIGH PROMINENCE (most visible)
    86→  COMMENT_ADDED: {
    87→    color: "text-emerald-600",
    88→    bg: "bg-emerald-50",
    89→    border: "border-emerald-200",
    90→    label: "Dealer Update",
    91→    prominent: true
    92→  },
    93→  DEALER_UPDATE: {
    94→    color: "text-emerald-600",
    95→    bg: "bg-emerald-50",
    96→    border: "border-emerald-200",
    97→    label: "Dealer Update",
    98→    prominent: true
    99→  },
   100→  // AI events - moderate

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
