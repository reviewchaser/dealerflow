  1790→              {/* VRM Search Dropdown */}
  1791→              {showVrmDropdown && (
  1792→                <>
  1793→                  <div className="fixed inset-0 z-10" onClick={() => setShowVrmDropdown(false)}></div>
  1794→                  <div className="absolute top-full left-0 mt-1 w-72 bg-white rounded-xl shadow-xl border border-slate-200 z-20 overflow-hidden">
  1795→                    {vrmSearchLoading ? (
  1796→                      <div className="px-4 py-6 text-center">
  1797→                        <span className="loading loading-spinner loading-sm text-slate-400"></span>
  1798→                        <p className="text-sm text-slate-500 mt-2">Searching...</p>
  1799→                      </div>
  1800→                    ) : vrmSearchResults.length > 0 ? (
  1801→                      <ul className="py-1 max-h-64 overflow-y-auto">
  1802→                        {vrmSearchResults.map((vehicle, idx) => (
  1803→                          <li key={vehicle.id || vehicle._id}>
  1804→                            <button
  1805→                              className="w-full px-4 py-2.5 text-left hover:bg-slate-50 flex items-center justify-between gap-2 transition-colors"
  1806→                              onClick={() => handleVrmSelect(vehicle)}
  1807→                            >
  1808→                              <div className="flex items-center gap-3 min-w-0">
  1809→                                <span className="font-mono font-bold text-slate-900">{vehicle.regCurrent || vehicle.vrm}</span>
  1810→                                <span className="text-sm text-slate-500 truncate">{vehicle.make} {vehicle.model}</span>
  1811→                              </div>
  1812→                              <div className="flex items-center gap-1.5 shrink-0">
  1813→                                {idx === 0 && vrmSearchResults.filter(v => v.regCurrent === vehicle.regCurrent).length > 1 && (
  1814→                                  <span className="text-[10px] px-1.5 py-0.5 rounded bg-blue-100 text-blue-600 font-medium">
  1815→                                    Latest
  1816→                                  </span>
  1817→                                )}
  1818→                                <span className="text-xs px-2 py-0.5 rounded-full bg-slate-100 text-slate-600">
  1819→                                  {getStatusLabel(vehicle.status)}
  1820→                                </span>
  1821→                              </div>
  1822→                            </button>
  1823→                          </li>
  1824→                        ))}
  1825→                      </ul>
  1826→                    ) : (
  1827→                      <div className="px-4 py-6 text-center">
  1828→                        <svg className="w-8 h-8 mx-auto text-slate-300 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1829→                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
  1830→                        </svg>
  1831→                        <p className="text-sm text-slate-500">No vehicles found</p>
  1832→                        <p className="text-xs text-slate-400 mt-1">Try a different registration</p>
  1833→                      </div>
  1834→                    )}
  1835→                  </div>
  1836→                </>
  1837→              )}
  1838→            </div>
  1839→
  1840→            <div className="divider divider-horizontal mx-1 shrink-0 hidden sm:flex"></div>
  1841→
  1842→            {/* All Vehicles Button */}
  1843→            <button
  1844→              className={`btn btn-sm shrink-0 ${activeFilters.length === 0 ? "btn-primary" : "btn-outline"}`}
  1845→              onClick={() => setActiveFilters([])}
  1846→            >
  1847→              <span className="hidden sm:inline">All Vehicles</span>
  1848→              <span className="sm:hidden">All</span>
  1849→              <span className="text-xs opacity-70">({vehicles.length})</span>
  1850→            </button>
  1851→
  1852→            <div className="divider divider-horizontal mx-1 shrink-0 hidden sm:flex"></div>
  1853→
  1854→            {/* Consolidated Filters - Strictly Separated Desktop/Mobile */}
  1855→            <div className="shrink-0">
  1856→              {/* Trigger Button */}
  1857→              <button
  1858→                ref={filterButtonRef}
  1859→                className={`flex items-center gap-2 px-3 py-2 rounded-lg shrink-0 whitespace-nowrap text-sm font-medium transition-all ${
  1860→                  activeFilters.length > 0
  1861→                    ? "bg-blue-600 text-white"
  1862→                    : "bg-white border border-slate-200 text-slate-700 hover:border-slate-300"
  1863→                }`}
  1864→                onClick={() => showFiltersDropdown ? setShowFiltersDropdown(false) : openFiltersDropdown()}
  1865→              >
  1866→                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1867→                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
  1868→                </svg>
  1869→                <span className="hidden sm:inline">Filters</span>

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
