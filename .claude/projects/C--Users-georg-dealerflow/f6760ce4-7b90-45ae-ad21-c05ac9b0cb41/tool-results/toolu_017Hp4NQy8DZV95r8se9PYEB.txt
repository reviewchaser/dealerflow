  2670→                    onCopyToNotes={(text) => {
  2671→                      setNewComment((prev) => prev ? prev + "\n\n" + text : text);
  2672→                      toast.success("Added to comment draft");
  2673→                    }}
  2674→                  />
  2675→                )}
  2676→              </div>
  2677→
  2678→              {/* Issue Summary */}
  2679→              {selectedCase.summary && (
  2680→                <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
  2681→                  <div className="px-4 py-3 border-b border-slate-100">
  2682→                    <h3 className="text-sm font-semibold text-slate-900">Issue Summary</h3>
  2683→                  </div>
  2684→                  <div className="p-4">
  2685→                    <p className="text-sm text-slate-700 whitespace-pre-wrap">{selectedCase.summary}</p>
  2686→                  </div>
  2687→                </div>
  2688→              )}
  2689→
  2690→              {/* Attachments/Media */}
  2691→              <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
  2692→                <div className="px-4 py-3 border-b border-slate-100 flex items-center justify-between">
  2693→                  <h3 className="text-sm font-semibold text-slate-900">
  2694→                    Attachments {(selectedCase.attachments?.length || 0) > 0 && (
  2695→                      <span className="ml-1 text-slate-400 font-normal">({selectedCase.attachments.length})</span>
  2696→                    )}
  2697→                  </h3>
  2698→                  <label className="inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-md transition-colors cursor-pointer">
  2699→                    {isUploadingCaseMedia ? (
  2700→                      <span className="w-3.5 h-3.5 border-2 border-slate-300 border-t-slate-600 rounded-full animate-spin"></span>
  2701→                    ) : (
  2702→                      <svg className="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  2703→                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
  2704→                      </svg>
  2705→                    )}
  2706→                    Add Media
  2707→                    <input
  2708→                      type="file"
  2709→                      multiple
  2710→                      accept="image/*,video/*,.pdf"
  2711→                      className="hidden"
  2712→                      onChange={handleCaseMediaUpload}
  2713→                      disabled={isUploadingCaseMedia}
  2714→                    />
  2715→                  </label>
  2716→                </div>
  2717→                <div className="p-4">
  2718→                  {selectedCase.attachments?.length > 0 ? (
  2719→                    <div className="grid grid-cols-3 gap-2">
  2720→                      {selectedCase.attachments.map((att, i) => (
  2721→                        <a
  2722→                          key={i}
  2723→                          href={att.url}
  2724→                          target="_blank"
  2725→                          rel="noopener noreferrer"
  2726→                          className="block aspect-square bg-slate-100 rounded-lg overflow-hidden hover:ring-2 hover:ring-blue-500 transition-all"
  2727→                        >
  2728→                          {att.url.match(/\.(jpg|jpeg|png|gif|webp)$/i) ? (
  2729→                            <img src={att.url} alt={att.filename} className="w-full h-full object-cover" />
  2730→                          ) : att.url.match(/\.(mp4|webm|mov)$/i) ? (
  2731→                            <div className="w-full h-full flex items-center justify-center bg-slate-200">
  2732→                              <svg className="w-8 h-8 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  2733→                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
  2734→                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
  2735→                              </svg>
  2736→                            </div>
  2737→                          ) : (
  2738→                            <div className="w-full h-full flex flex-col items-center justify-center bg-slate-100 p-2">
  2739→                              <svg className="w-6 h-6 text-slate-400 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  2740→                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
  2741→                              </svg>
  2742→                              <span className="text-xs text-slate-500 text-center truncate w-full">{att.filename}</span>
  2743→                            </div>
  2744→                          )}
  2745→                        </a>
  2746→                      ))}
  2747→                    </div>
  2748→                  ) : (
  2749→                    <p className="text-sm text-slate-500 text-center py-2">No attachments yet. Click "Add Media" to upload photos or documents.</p>
  2750→                  )}
  2751→                </div>
  2752→              </div>
  2753→
  2754→              {/* Timeline */}
  2755→              <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
  2756→                <div className="px-4 py-3 border-b border-slate-100 flex items-center justify-between">
  2757→                  <h3 className="text-sm font-semibold text-slate-900">Timeline</h3>
  2758→                </div>
  2759→                <div className="p-4">
  2760→                  {/* Add Update - Quick Templates + Input */}
  2761→                  <div className="mb-4 pb-4 border-b border-slate-100">
  2762→                    {/* Quick Templates */}
  2763→                    <div className="flex gap-2 flex-wrap mb-3">
  2764→                      {QUICK_UPDATE_TEMPLATES.map((template, i) => (
  2765→                        <button
  2766→                          key={i}
  2767→                          className="px-2.5 py-1 text-xs font-medium text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-full transition-colors"
  2768→                          onClick={() => setNewComment(template.text)}
  2769→                        >
  2770→                          {template.label}
  2771→                        </button>
  2772→                      ))}
  2773→                    </div>
  2774→
  2775→                    {/* Attachments Preview */}
  2776→                    {commentAttachments.length > 0 && (
  2777→                      <div className="flex gap-2 flex-wrap mb-2">
  2778→                        {commentAttachments.map((att, i) => (
  2779→                          <span key={i} className="inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium text-slate-600 bg-slate-100 rounded-lg">
  2780→                            <svg className="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  2781→                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13" />
  2782→                            </svg>
  2783→                            {att.filename}
  2784→                            <button
  2785→                              className="text-slate-400 hover:text-red-500 transition-colors"
  2786→                              onClick={() => setCommentAttachments(commentAttachments.filter((_, j) => j !== i))}
  2787→                            >
  2788→                              <svg className="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  2789→                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
  2790→                              </svg>
  2791→                            </button>
  2792→                          </span>
  2793→                        ))}
  2794→                      </div>
  2795→                    )}
  2796→
  2797→                    {/* Input Row */}
  2798→                    <div className="flex gap-2">
  2799→                      <input
  2800→                        type="text"
  2801→                        className="flex-1 px-3 py-2.5 bg-white border border-slate-200 rounded-lg text-slate-900 placeholder-slate-400 focus:ring-2 focus:ring-[#0066CC] focus:border-transparent transition-all outline-none text-sm"
  2802→                        placeholder="Add an update..."
  2803→                        value={newComment}
  2804→                        onChange={(e) => setNewComment(e.target.value)}
  2805→                        onKeyPress={(e) => e.key === "Enter" && addComment()}
  2806→                      />
  2807→                      <input
  2808→                        type="file"
  2809→                        ref={fileInputRef}
  2810→                        className="hidden"
  2811→                        multiple
  2812→                        onChange={handleFileSelect}
  2813→                      />
  2814→                      <button
  2815→                        className="p-2.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors"
  2816→                        onClick={() => fileInputRef.current?.click()}
  2817→                        title="Attach files"
  2818→                      >
  2819→                        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  2820→                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13" />
  2821→                        </svg>
  2822→                      </button>
  2823→                      <button
  2824→                        className="px-4 py-2.5 text-sm font-medium text-white bg-[#0066CC] hover:bg-[#0055BB] rounded-lg transition-colors disabled:opacity-50"
  2825→                        onClick={addComment}
  2826→                        disabled={!newComment.trim()}
  2827→                      >
  2828→                        Add
  2829→                      </button>
  2830→                    </div>
  2831→                  </div>
  2832→
  2833→                  {/* Unified Timeline - Events + Comments merged */}
  2834→                  <div className="space-y-3">
  2835→                    {buildUnifiedTimeline(selectedCase.events || [], selectedCase.comments || []).map((item, idx) => {
  2836→                      const style = TIMELINE_STYLES[item.type] || TIMELINE_STYLES.CASE_CREATED;
  2837→                      const IconComponent = getTimelineIcon(item.type);
  2838→                      const isComment = item.itemType === 'comment' || item.type === 'COMMENT_ADDED' || item.type === 'DEALER_UPDATE';
  2839→                      const isAI = item.type === 'AI_REVIEW_GENERATED';
  2840→                      const isSystemEvent = ['STATUS_CHANGED', 'WARRANTY_STAGE_MOVED', 'CASE_CREATED'].includes(item.type);
  2841→
  2842→                      // Render dealer comments as speech bubbles
  2843→                      if (isComment) {
  2844→                        const content = item.comment?.content || item.metadata?.content || item.summary || '';
  2845→                        const isCustomer = item.isCustomer || item.comment?.authorType === 'customer';
  2846→                        const attachments = item.comment?.attachments || [];
  2847→
  2848→                        return (
  2849→                          <div key={idx} className={`relative pl-8 ${isCustomer ? '' : ''}`}>
  2850→                            {/* Icon */}
  2851→                            <div className={`absolute left-0 top-0 w-6 h-6 rounded-full flex items-center justify-center ${isCustomer ? 'bg-[#0066CC]/10' : 'bg-emerald-50'}`}>
  2852→                              <IconComponent className={`w-3.5 h-3.5 ${isCustomer ? 'text-[#0066CC]' : 'text-emerald-600'}`} />
  2853→                            </div>
  2854→                            {/* Speech bubble */}
  2855→                            <div className={`rounded-xl p-3 ${isCustomer ? 'bg-[#0066CC]/5 border border-[#0066CC]/10' : 'bg-emerald-50 border border-emerald-100'}`}>
  2856→                              <div className="flex items-center gap-2 mb-1">
  2857→                                <span className={`text-[10px] font-bold uppercase tracking-wide ${isCustomer ? 'text-[#0066CC]' : 'text-emerald-700'}`}>
  2858→                                  {isCustomer ? 'Customer' : 'Dealer Update'}
  2859→                                </span>
  2860→                                <span className="text-xs text-slate-400">
  2861→                                  {formatTimelineDate(item.createdAt)}
  2862→                                </span>
  2863→                                {item.createdByName && !isCustomer && (
  2864→                                  <span className="text-xs text-slate-400">• {item.createdByName}</span>
  2865→                                )}
  2866→                              </div>
  2867→                              <p className="text-sm text-slate-700">{content}</p>
  2868→                              {attachments.length > 0 && (
  2869→                                <div className="flex gap-2 mt-2 flex-wrap">
  2870→                                  {attachments.map((att, i) => (
  2871→                                    <a
  2872→                                      key={i}
  2873→                                      href={att.url || att}
  2874→                                      target="_blank"
  2875→                                      rel="noopener noreferrer"
  2876→                                      className="inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium text-slate-600 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors"
  2877→                                    >
  2878→                                      <svg className="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  2879→                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13" />
  2880→                                      </svg>
  2881→                                      {att.filename || "File"}
  2882→                                    </a>
  2883→                                  ))}
  2884→                                </div>
  2885→                              )}
  2886→                            </div>
  2887→                          </div>
  2888→                        );
  2889→                      }
  2890→
  2891→                      // Render AI review prominently
  2892→                      if (isAI) {
  2893→                        return (
  2894→                          <div key={idx} className="relative pl-8">
  2895→                            <div className="absolute left-0 top-0 w-6 h-6 rounded-full bg-purple-100 flex items-center justify-center">
  2896→                              <IconComponent className="w-3.5 h-3.5 text-purple-600" />
  2897→                            </div>
  2898→                            <div className="rounded-xl p-3 bg-purple-50 border border-purple-100">
  2899→                              <div className="flex items-center gap-2 mb-1">
  2900→                                <span className="text-[10px] font-bold uppercase tracking-wide text-purple-700">AI Review</span>
  2901→                                <span className="text-xs text-slate-400">{formatTimelineDate(item.createdAt)}</span>
  2902→                              </div>
  2903→                              <p className="text-sm text-slate-700">{item.summary || 'AI review generated'}</p>
  2904→                            </div>
  2905→                          </div>
  2906→                        );
  2907→                      }
  2908→
  2909→                      // Render system events (status, booking, etc.) with subtle styling
  2910→                      return (
  2911→                        <div key={idx} className={`relative pl-8 ${isSystemEvent ? 'opacity-75' : ''}`}>
  2912→                          <div className={`absolute left-0 top-0.5 w-6 h-6 rounded-full flex items-center justify-center ${style.bg} border ${style.border}`}>
  2913→                            <IconComponent className={`w-3 h-3 ${style.color}`} />
  2914→                          </div>
  2915→                          <div className="min-w-0">
  2916→                            <div className="flex items-center gap-2 flex-wrap">
  2917→                              <span className={`text-[10px] font-bold uppercase tracking-wide ${style.color}`}>
  2918→                                {style.label}
  2919→                              </span>
  2920→                              <span className="text-xs text-slate-400">
  2921→                                {formatTimelineDate(item.createdAt)}
  2922→                              </span>
  2923→                              {item.createdByName && (
  2924→                                <span className="text-xs text-slate-400">• {item.createdByName}</span>
  2925→                              )}
  2926→                            </div>
  2927→                            <p className="text-sm text-slate-600 mt-0.5">{item.summary || item.type.replace(/_/g, ' ')}</p>
  2928→                          </div>
  2929→                        </div>
  2930→                      );
  2931→                    })}
  2932→
  2933→                    {(!selectedCase.events?.length && !selectedCase.comments?.length) && (
  2934→                      <p className="text-sm text-slate-500 text-center py-4">No activity yet.</p>
  2935→                    )}
  2936→                  </div>
  2937→                </div>
  2938→              </div>
  2939→            </div>
  2940→          </div>
  2941→        </div>
  2942→      )}
  2943→
  2944→      {/* Regenerate Confirm Modal */}
  2945→      {showRegenerateConfirm && (
  2946→        <div className="modal modal-open">
  2947→          <div className="modal-box">
  2948→            <h3 className="font-bold text-lg">Regenerate AI Review?</h3>
  2949→            <p className="py-4">This will replace the existing AI review with a new one. This action cannot be undone.</p>
  2950→            <div className="modal-action">
  2951→              <button className="btn btn-ghost" onClick={() => setShowRegenerateConfirm(false)}>Cancel</button>
  2952→              <button className="btn btn-primary" onClick={() => generateAIReview(true)}>Regenerate</button>
  2953→            </div>
  2954→          </div>
  2955→          <div className="modal-backdrop" onClick={() => setShowRegenerateConfirm(false)}></div>
  2956→        </div>
  2957→      )}
  2958→
  2959→      {/* Add Case Modal */}
  2960→      {showAddModal && (
  2961→        <AddCaseModal onClose={() => setShowAddModal(false)} onSuccess={() => { setShowAddModal(false); fetchCases(); }} />
  2962→      )}
  2963→
  2964→      {/* Vehicle Drawer - Stacked over warranty case drawer */}
  2965→      <VehicleDrawer
  2966→        vehicleId={selectedVehicleId}
  2967→        isOpen={isVehicleDrawerOpen}
  2968→        onClose={() => {
  2969→          setIsVehicleDrawerOpen(false);
  2970→          setSelectedVehicleId(null);
  2971→        }}
  2972→        isStacked={true}
  2973→        readOnly={true}
  2974→      />
  2975→
  2976→      {/* Job Sheet Share Modal */}
  2977→      {showJobSheetModal && (
  2978→        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-[60]">
  2979→          <div className="bg-white rounded-xl shadow-2xl w-full max-w-md mx-4">
  2980→            <div className="flex items-center justify-between p-4 border-b border-slate-200">
  2981→              <h3 className="text-lg font-bold text-slate-900">Share Job Sheet</h3>
  2982→              <button
  2983→                onClick={() => {
  2984→                  setShowJobSheetModal(false);
  2985→                  setJobSheetLink(null);
  2986→                }}
  2987→                className="btn btn-ghost btn-sm btn-circle"
  2988→              >
  2989→                ✕
  2990→              </button>
  2991→            </div>
  2992→            <div className="p-4">
  2993→              {isGeneratingJobSheet ? (
  2994→                <div className="flex flex-col items-center py-8">
  2995→                  <div className="w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mb-3"></div>
  2996→                  <p className="text-slate-600">Generating share link...</p>
  2997→                </div>
  2998→              ) : jobSheetLink ? (
  2999→                <div className="space-y-4">
  3000→                  <div className="bg-slate-50 rounded-lg p-3">
  3001→                    <p className="text-xs text-slate-500 mb-1">Shareable Link</p>
  3002→                    <p className="text-sm font-mono text-slate-900 break-all">{jobSheetLink}</p>
  3003→                  </div>
  3004→                  <p className="text-xs text-slate-500">
  3005→                    This link expires in 60 days. Anyone with this link can view the job sheet.
  3006→                  </p>
  3007→                  <div className="grid grid-cols-2 gap-3">
  3008→                    <button
  3009→                      onClick={copyJobSheetLink}
  3010→                      className="btn btn-outline btn-sm gap-2"
  3011→                    >
  3012→                      <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  3013→                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
  3014→                      </svg>
  3015→                      Copy Link
  3016→                    </button>
  3017→                    <button
  3018→                      onClick={shareViaWhatsApp}
  3019→                      className="btn btn-success btn-sm gap-2 text-white"
  3020→                    >
  3021→                      <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
  3022→                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
  3023→                      </svg>
  3024→                      WhatsApp
  3025→                    </button>
  3026→                    <button
  3027→                      onClick={() => {
  3028→                        const reg = selectedCase?.regAtPurchase || selectedCase?.currentReg || "Vehicle";
  3029→                        const subject = `Job Sheet - ${reg}`;
  3030→                        const body = `Here is the warranty job sheet for ${reg}:\n\n${jobSheetLink}`;
  3031→                        window.open(`mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`);
  3032→                      }}
  3033→                      className="btn btn-outline btn-sm gap-2"
  3034→                    >
  3035→                      <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  3036→                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
  3037→                      </svg>
  3038→                      Email
  3039→                    </button>
  3040→                    <button
  3041→                      onClick={() => window.open(jobSheetLink, '_blank')}
  3042→                      className="btn btn-outline btn-sm gap-2"
  3043→                    >
  3044→                      <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  3045→                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
  3046→                      </svg>
  3047→                      Print / PDF
  3048→                    </button>
  3049→                  </div>
  3050→                </div>
  3051→              ) : (
  3052→                <div className="text-center py-8 text-slate-500">
  3053→                  No link generated yet
  3054→                </div>
  3055→              )}
  3056→            </div>
  3057→            <div className="flex justify-end p-4 border-t border-slate-200">
  3058→              <button
  3059→                className="btn btn-ghost"
  3060→                onClick={() => {
  3061→                  setShowJobSheetModal(false);
  3062→                  setJobSheetLink(null);
  3063→                }}
  3064→              >
  3065→                Close
  3066→              </button>
  3067→            </div>
  3068→          </div>
  3069→        </div>

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
