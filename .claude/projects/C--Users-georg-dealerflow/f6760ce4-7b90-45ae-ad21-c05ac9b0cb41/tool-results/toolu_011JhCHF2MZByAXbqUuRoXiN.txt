  1870â†’      )}
  1871â†’
  1872â†’      {/* Case Detail Drawer */}
  1873â†’      {selectedCase && (
  1874â†’        <div className="fixed inset-0 z-50 flex justify-end">
  1875â†’          <div className="bg-black/40 absolute inset-0 backdrop-blur-sm" onClick={() => setSelectedCase(null)}></div>
  1876â†’          <div className="relative bg-white w-full max-w-xl h-full overflow-y-auto shadow-2xl">
  1877â†’            {/* Modern Sticky Header */}
  1878â†’            <div className="sticky top-0 bg-white/95 backdrop-blur-md border-b border-slate-200 px-5 py-4 z-10">
  1879â†’              <div className="flex justify-between items-start gap-3">
  1880â†’                {/* Back button on mobile */}
  1881â†’                <button className="md:hidden p-2 -ml-2 rounded-lg hover:bg-slate-100 transition-colors" onClick={() => setSelectedCase(null)}>
  1882â†’                  <svg className="w-5 h-5 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1883â†’                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
  1884â†’                  </svg>
  1885â†’                </button>
  1886â†’                <div className="flex-1 min-w-0">
  1887â†’                  {/* VRM + Status Pills Row */}
  1888â†’                  <div className="flex items-center gap-2 flex-wrap">
  1889â†’                    <span className="inline-flex items-center bg-amber-100 border border-amber-300 rounded-lg px-3 py-1.5 font-mono font-bold text-slate-900 text-base tracking-wider uppercase shadow-sm">
  1890â†’                      {selectedCase.regAtPurchase || selectedCase.details?.vehicleReg || "NO REG"}
  1891â†’                    </span>
  1892â†’                    {selectedCase.warrantyType && (
  1893â†’                      <span className="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-slate-100 text-slate-600 border border-slate-200">
  1894â†’                        {selectedCase.warrantyType}
  1895â†’                      </span>
  1896â†’                    )}
  1897â†’                    <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold capitalize ${PRIORITIES[selectedCase.priority]?.bg} ${PRIORITIES[selectedCase.priority]?.text} ${PRIORITIES[selectedCase.priority]?.border} border`}>
  1898â†’                      {selectedCase.priority}
  1899â†’                    </span>
  1900â†’                  </div>
  1901â†’                  <p className="text-sm text-slate-500 mt-1.5 truncate">
  1902â†’                    {selectedCase.contactId?.name || "Unknown"} &middot; {daysSince(selectedCase.createdAt)}d open
  1903â†’                  </p>
  1904â†’                </div>
  1905â†’                <div className="hidden md:flex items-center gap-1.5">
  1906â†’                  <button
  1907â†’                    onClick={handleGenerateJobSheet}
  1908â†’                    className="inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-slate-600 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors"
  1909â†’                    title="Share Job Sheet"
  1910â†’                  >
  1911â†’                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1912â†’                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
  1913â†’                    </svg>
  1914â†’                    Share
  1915â†’                  </button>
  1916â†’                  <button
  1917â†’                    className="p-2 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-colors"
  1918â†’                    onClick={() => setSelectedCase(null)}
  1919â†’                  >
  1920â†’                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1921â†’                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
  1922â†’                    </svg>
  1923â†’                  </button>
  1924â†’                </div>
  1925â†’              </div>
  1926â†’
  1927â†’              {/* Status Segmented Control */}
  1928â†’              <div className="flex gap-2 mt-4">
  1929â†’                <div className="flex-1 bg-slate-100 rounded-lg p-1 flex">
  1930â†’                  {COLUMNS.map(c => (
  1931â†’                    <button
  1932â†’                      key={c.key}
  1933â†’                      onClick={async () => {
  1934â†’                        if (selectedCase.boardStatus !== c.key) {
  1935â†’                          await updateCase(
  1936â†’                            { boardStatus: c.key },
  1937â†’                            `Moved to ${c.label}`
  1938â†’                          );
  1939â†’                        }
  1940â†’                      }}
  1941â†’                      className={`flex-1 px-2 py-1.5 text-xs font-medium rounded-md transition-all ${
  1942â†’                        selectedCase.boardStatus === c.key
  1943â†’                          ? "bg-white text-slate-900 shadow-sm"
  1944â†’                          : "text-slate-500 hover:text-slate-700"
  1945â†’                      }`}
  1946â†’                    >
  1947â†’                      {c.label}
  1948â†’                    </button>
  1949â†’                  ))}
  1950â†’                </div>
  1951â†’                <div className="bg-slate-100 rounded-lg p-1 flex">
  1952â†’                  {["low", "normal", "high", "critical"].map(p => (
  1953â†’                    <button
  1954â†’                      key={p}
  1955â†’                      onClick={async () => {
  1956â†’                        if (selectedCase.priority !== p) {
  1957â†’                          await updateCase({ priority: p }, "Priority updated");
  1958â†’                        }
  1959â†’                      }}
  1960â†’                      className={`px-2 py-1.5 text-xs font-medium rounded-md capitalize transition-all ${
  1961â†’                        selectedCase.priority === p
  1962â†’                          ? `${PRIORITIES[p]?.bg} ${PRIORITIES[p]?.text} shadow-sm`
  1963â†’                          : "text-slate-400 hover:text-slate-600"
  1964â†’                      }`}
  1965â†’                    >
  1966â†’                      {p === "critical" ? "!" : p.charAt(0).toUpperCase()}
  1967â†’                    </button>
  1968â†’                  ))}
  1969â†’                </div>
  1970â†’              </div>
  1971â†’            </div>
  1972â†’
  1973â†’            <div className="px-5 py-4 space-y-4">
  1974â†’              {/* Customer & Vehicle Section */}
  1975â†’              <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
  1976â†’                <div className="px-4 py-3 border-b border-slate-100">
  1977â†’                  <h3 className="text-sm font-semibold text-slate-900">Customer & Vehicle</h3>
  1978â†’                </div>
  1979â†’                <div className="p-4">
  1980â†’                  <div className="grid grid-cols-2 gap-x-4 gap-y-3 text-sm">
  1981â†’                    <div>
  1982â†’                      <span className="text-xs font-medium text-slate-500 uppercase tracking-wide">Name</span>
  1983â†’                      <p className="text-slate-900 mt-0.5">{selectedCase.contactId?.name || "â€”"}</p>
  1984â†’                    </div>
  1985â†’                    <div>
  1986â†’                      <span className="text-xs font-medium text-slate-500 uppercase tracking-wide">Phone</span>
  1987â†’                      <p className="text-slate-900 mt-0.5">{selectedCase.contactId?.phone || "â€”"}</p>
  1988â†’                    </div>
  1989â†’                    <div className="col-span-2">
  1990â†’                      <span className="text-xs font-medium text-slate-500 uppercase tracking-wide">Email</span>
  1991â†’                      <p className="text-slate-900 mt-0.5">{selectedCase.contactId?.email || "â€”"}</p>
  1992â†’                    </div>
  1993â†’                    <div>
  1994â†’                      <span className="text-xs font-medium text-slate-500 uppercase tracking-wide">Reg at Purchase</span>
  1995â†’                      <p className="text-slate-900 mt-0.5">{selectedCase.regAtPurchase || "â€”"}</p>
  1996â†’                    </div>
  1997â†’                    <div>
  1998â†’                      <span className="text-xs font-medium text-slate-500 uppercase tracking-wide">Current Reg</span>
  1999â†’                      <p className="text-slate-900 mt-0.5">{selectedCase.currentReg || selectedCase.details?.vehicleReg || "â€”"}</p>
  2000â†’                    </div>
  2001â†’                    {selectedCase.vehicleId && (
  2002â†’                      <>
  2003â†’                        <div className="col-span-2">
  2004â†’                          <span className="text-xs font-medium text-slate-500 uppercase tracking-wide">Vehicle</span>
  2005â†’                          <p className="text-slate-900 mt-0.5">
  2006â†’                            {selectedCase.vehicleId.make} {selectedCase.vehicleId.model} {selectedCase.vehicleId.year}
  2007â†’                          </p>
  2008â†’                        </div>
  2009â†’                        <div className="col-span-2 pt-1">
  2010â†’                          <button
  2011â†’                            className="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-[#0066CC] bg-[#0066CC]/5 hover:bg-[#0066CC]/10 border border-[#0066CC]/20 rounded-lg transition-colors"
  2012â†’                            onClick={() => {
  2013â†’                              setSelectedVehicleId(selectedCase.vehicleId._id || selectedCase.vehicleId.id);
  2014â†’                              setIsVehicleDrawerOpen(true);
  2015â†’                            }}
  2016â†’                          >
  2017â†’                            <svg className="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  2018â†’                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
  2019â†’                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
  2020â†’                            </svg>
  2021â†’                            View Vehicle
  2022â†’                          </button>
  2023â†’                        </div>
  2024â†’                      </>
  2025â†’                    )}
  2026â†’                  </div>
  2027â†’                </div>
  2028â†’              </div>
  2029â†’
  2030â†’              {/* Customer Contact Tracking Section */}
  2031â†’              <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
  2032â†’                <div className="px-4 py-3 border-b border-slate-100 flex items-center justify-between">
  2033â†’                  <h3 className="text-sm font-semibold text-slate-900">Customer Contact</h3>
  2034â†’                  {selectedCase.nextContactAt && new Date(selectedCase.nextContactAt) <= new Date() && (
  2035â†’                    <span className="inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-700">
  2036â†’                      <svg className="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  2037â†’                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
  2038â†’                      </svg>
  2039â†’                      Contact Due
  2040â†’                    </span>
  2041â†’                  )}
  2042â†’                </div>
  2043â†’                <div className="p-4 space-y-4">
  2044â†’                  {/* Last Contacted Info */}
  2045â†’                  <div className="flex items-center justify-between">
  2046â†’                    <div>
  2047â†’                      <span className="text-xs font-medium text-slate-500 uppercase tracking-wide">Last Contacted</span>
  2048â†’                      <p className="text-sm text-slate-900 mt-0.5">
  2049â†’                        {selectedCase.lastContactedAt ? (
  2050â†’                          <>
  2051â†’                            {new Date(selectedCase.lastContactedAt).toLocaleDateString("en-GB", { day: "numeric", month: "short", year: "numeric", hour: "2-digit", minute: "2-digit" })}
  2052â†’                            {selectedCase.lastContactedByName && (
  2053â†’                              <span className="text-slate-500"> by {selectedCase.lastContactedByName}</span>
  2054â†’                            )}
  2055â†’                          </>
  2056â†’                        ) : (
  2057â†’                          <span className="text-slate-400">Not contacted yet</span>
  2058â†’                        )}
  2059â†’                      </p>
  2060â†’                    </div>
  2061â†’                    <button
  2062â†’                      onClick={async () => {
  2063â†’                        const note = window.prompt("Add a note about this contact (optional):");
  2064â†’                        await updateCase({
  2065â†’                          _eventType: "CUSTOMER_CONTACTED",
  2066â†’                          _eventMetadata: { note: note || null }
  2067â†’                        }, "Customer contacted");
  2068â†’                      }}
  2069â†’                      className="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-emerald-700 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 rounded-lg transition-colors"
  2070â†’                    >
  2071â†’                      <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  2072â†’                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
  2073â†’                      </svg>
  2074â†’                      Mark Contacted
  2075â†’                    </button>
  2076â†’                  </div>
  2077â†’
  2078â†’                  {/* Contact Reminder */}
  2079â†’                  <div className="pt-3 border-t border-slate-100">
  2080â†’                    <div className="flex items-center justify-between mb-2">
  2081â†’                      <span className="text-xs font-medium text-slate-500 uppercase tracking-wide">Contact Reminder</span>
  2082â†’                      {selectedCase.nextContactAt && (
  2083â†’                        <button
  2084â†’                          onClick={async () => {
  2085â†’                            await updateCase({
  2086â†’                              _eventType: "CONTACT_REMINDER_SET",
  2087â†’                              _eventMetadata: { nextContactAt: null }
  2088â†’                            }, "Contact reminder cleared");
  2089â†’                          }}
  2090â†’                          className="text-xs text-slate-400 hover:text-red-500 transition-colors"
  2091â†’                        >
  2092â†’                          Clear
  2093â†’                        </button>
  2094â†’                      )}
  2095â†’                    </div>
  2096â†’                    <div className="flex gap-2">
  2097â†’                      <input
  2098â†’                        type="datetime-local"
  2099â†’                        className="flex-1 px-3 py-2 bg-slate-50 border border-transparent rounded-lg text-slate-900 focus:bg-white focus:ring-2 focus:ring-[#0066CC] focus:border-transparent transition-all outline-none text-sm"
  2100â†’                        value={selectedCase.nextContactAt ? new Date(selectedCase.nextContactAt).toISOString().slice(0, 16) : ""}
  2101â†’                        onChange={async (e) => {
  2102â†’                          const newDate = e.target.value ? new Date(e.target.value).toISOString() : null;
  2103â†’                          await updateCase({
  2104â†’                            _eventType: "CONTACT_REMINDER_SET",
  2105â†’                            _eventMetadata: { nextContactAt: newDate }
  2106â†’                          }, newDate ? "Contact reminder set" : "Contact reminder cleared");
  2107â†’                        }}
  2108â†’                      />
  2109â†’                    </div>
  2110â†’                    {selectedCase.nextContactAt && (
  2111â†’                      <p className="text-xs text-slate-500 mt-1.5">
  2112â†’                        Reminder will show on dashboard and warranty board
  2113â†’                      </p>
  2114â†’                    )}
  2115â†’                  </div>
  2116â†’                </div>
  2117â†’              </div>
  2118â†’
  2119â†’              {/* Repair Location Section */}
  2120â†’              <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
  2121â†’                <div className="px-4 py-3 border-b border-slate-100 flex items-center justify-between">
  2122â†’                  <h3 className="text-sm font-semibold text-slate-900">Repair Location</h3>
  2123â†’                  <span className={`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${REPAIR_LOCATION_STYLES[selectedCase.repairLocationType || "WITH_CUSTOMER"]?.bg} ${REPAIR_LOCATION_STYLES[selectedCase.repairLocationType || "WITH_CUSTOMER"]?.text}`}>
  2124â†’                    {REPAIR_LOCATION_LABELS[selectedCase.repairLocationType || "WITH_CUSTOMER"]}
  2125â†’                  </span>
  2126â†’                </div>
  2127â†’                <div className="p-4 space-y-4">
  2128â†’                  {/* Location Type Segmented Control - Modern Pill Selector */}
  2129â†’                  <div>
  2130â†’                    <label className="text-xs font-medium text-slate-500 uppercase tracking-wide mb-2 block">Location Type</label>
  2131â†’                    <div className="flex flex-wrap gap-2">
  2132â†’                      {[
  2133â†’                        {
  2134â†’                          key: "WITH_CUSTOMER",
  2135â†’                          label: "With Customer",
  2136â†’                          icon: (
  2137â†’                            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  2138â†’                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
  2139â†’                            </svg>
  2140â†’                          ),
  2141â†’                          selectedBg: "bg-slate-700",
  2142â†’                          selectedText: "text-white",
  2143â†’                          selectedBorder: "border-slate-700",
  2144â†’                        },
  2145â†’                        {
  2146â†’                          key: "ON_SITE",
  2147â†’                          label: "On-site",
  2148â†’                          icon: (
  2149â†’                            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  2150â†’                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
  2151â†’                            </svg>
  2152â†’                          ),
  2153â†’                          selectedBg: "bg-emerald-600",
  2154â†’                          selectedText: "text-white",
  2155â†’                          selectedBorder: "border-emerald-600",
  2156â†’                        },
  2157â†’                        {
  2158â†’                          key: "THIRD_PARTY",
  2159â†’                          label: "Third-party",
  2160â†’                          icon: (
  2161â†’                            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  2162â†’                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
  2163â†’                            </svg>
  2164â†’                          ),
  2165â†’                          selectedBg: "bg-teal-600",
  2166â†’                          selectedText: "text-white",
  2167â†’                          selectedBorder: "border-teal-600",
  2168â†’                        },
  2169â†’                      ].map(loc => {
  2170â†’                        const isSelected = (selectedCase.repairLocationType || "WITH_CUSTOMER") === loc.key;
  2171â†’                        return (
  2172â†’                          <button
  2173â†’                            key={loc.key}
  2174â†’                            onClick={async () => {
  2175â†’                              if (!isSelected) {
  2176â†’                                // Optimistic update
  2177â†’                                const oldValue = selectedCase.repairLocationType || "WITH_CUSTOMER";
  2178â†’                                setSelectedCase(prev => ({ ...prev, repairLocationType: loc.key }));
  2179â†’                                await updateCase({
  2180â†’                                  repairLocationType: loc.key,
  2181â†’                                  _eventType: "LOCATION_UPDATED",
  2182â†’                                  _eventMetadata: { fromLocation: oldValue, toLocation: loc.key }
  2183â†’                                }, "Location updated");
  2184â†’                              }
  2185â†’                            }}
  2186â†’                            className={`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium border-2 transition-all ${
  2187â†’                              isSelected
  2188â†’                                ? `${loc.selectedBg} ${loc.selectedText} ${loc.selectedBorder} shadow-md`
  2189â†’                                : "bg-white text-slate-600 border-slate-200 hover:border-slate-300 hover:bg-slate-50"
  2190â†’                            }`}
  2191â†’                          >
  2192â†’                            {loc.icon}
  2193â†’                            <span>{loc.label}</span>
  2194â†’                            {isSelected && (
  2195â†’                              <svg className="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  2196â†’                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
  2197â†’                              </svg>
  2198â†’                            )}
  2199â†’                          </button>
  2200â†’                        );
  2201â†’                      })}
  2202â†’                    </div>
  2203â†’                  </div>
  2204â†’
  2205â†’                  {/* Show additional fields for third-party repairs */}
  2206â†’                  {selectedCase.repairLocationType === "THIRD_PARTY" && (
  2207â†’                    <div className="space-y-3 pt-2 border-t border-slate-100">
  2208â†’                      <div>
  2209â†’                        <label className="text-xs font-medium text-slate-500 uppercase tracking-wide mb-1.5 block">Garage Name</label>
  2210â†’                        <input
  2211â†’                          type="text"
  2212â†’                          className="w-full px-3 py-2 bg-slate-50 border border-transparent rounded-lg text-slate-900 placeholder-slate-400 focus:bg-white focus:ring-2 focus:ring-[#0066CC] focus:border-transparent transition-all outline-none text-sm"
  2213â†’                          value={selectedCase.repairLocationName || ""}
  2214â†’                          placeholder="e.g., ABC Motors"
  2215â†’                          onChange={(e) => setSelectedCase({ ...selectedCase, repairLocationName: e.target.value })}
  2216â†’                          onBlur={() => updateCase({ repairLocationName: selectedCase.repairLocationName })}
  2217â†’                        />
  2218â†’                      </div>
  2219â†’
  2220â†’                      <div>
  2221â†’                        <label className="text-xs font-medium text-slate-500 uppercase tracking-wide mb-1.5 block">Notes</label>
  2222â†’                        <textarea
  2223â†’                          className="w-full px-3 py-2 bg-slate-50 border border-transparent rounded-lg text-slate-900 placeholder-slate-400 focus:bg-white focus:ring-2 focus:ring-[#0066CC] focus:border-transparent transition-all outline-none text-sm resize-none"
  2224â†’                          rows={2}
  2225â†’                          value={selectedCase.repairLocationNotes || ""}
  2226â†’                          placeholder="Any notes about the repair location..."
  2227â†’                          onChange={(e) => setSelectedCase({ ...selectedCase, repairLocationNotes: e.target.value })}
  2228â†’                          onBlur={() => updateCase({ repairLocationNotes: selectedCase.repairLocationNotes })}
  2229â†’                        />
  2230â†’                      </div>
  2231â†’                    </div>
  2232â†’                  )}
  2233â†’                </div>
  2234â†’              </div>
  2235â†’
  2236â†’              {/* Booking Section - Accent Styled */}
  2237â†’              <div className={`rounded-xl border-2 shadow-sm overflow-hidden ${
  2238â†’                selectedCase.bookedInAt
  2239â†’                  ? "bg-emerald-50/50 border-emerald-200"
  2240â†’                  : "bg-amber-50/50 border-amber-200"
  2241â†’              }`}>
  2242â†’                <div className={`px-4 py-3 flex items-center justify-between ${
  2243â†’                  selectedCase.bookedInAt
  2244â†’                    ? "bg-emerald-100/50 border-b border-emerald-200"
  2245â†’                    : "bg-amber-100/50 border-b border-amber-200"
  2246â†’                }`}>
  2247â†’                  <div className="flex items-center gap-2">
  2248â†’                    <span className="text-lg">{selectedCase.bookedInAt ? "ğŸ“…" : "â³"}</span>
  2249â†’                    <h3 className="text-sm font-semibold text-slate-900">Booking</h3>
  2250â†’                  </div>
  2251â†’                  {selectedCase.bookedInAt ? (
  2252â†’                    <span className="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700 border border-emerald-200">
  2253â†’                      {formatBookedDate(selectedCase.bookedInAt)}
  2254â†’                    </span>
  2255â†’                  ) : (
  2256â†’                    <span className="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-amber-100 text-amber-700 border border-amber-200">
  2257â†’                      Not Booked
  2258â†’                    </span>
  2259â†’                  )}
  2260â†’                </div>
  2261â†’                <div className="p-4">
  2262â†’                  <div>
  2263â†’                    <label className="text-xs font-medium text-slate-500 uppercase tracking-wide mb-1.5 block">Booked Date & Time</label>
  2264â†’                    <input
  2265â†’                      type="datetime-local"
  2266â†’                      className={`w-full px-3 py-2.5 rounded-lg text-slate-900 transition-all outline-none text-sm font-medium ${
  2267â†’                        selectedCase.bookedInAt
  2268â†’                          ? "bg-white border border-emerald-200 focus:ring-2 focus:ring-emerald-500"
  2269â†’                          : "bg-white border border-amber-200 focus:ring-2 focus:ring-amber-500"

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
