  1200â†’                                  </span>
  1201â†’                                )}
  1202â†’                              </div>
  1203â†’                            </div>
  1204â†’                          </div>
  1205â†’                        </div>
  1206â†’                      );
  1207â†’                    })}
  1208â†’
  1209â†’                    {columnCases.length === 0 && (
  1210â†’                      <div className="text-center py-12 text-slate-400">
  1211â†’                        <p className="text-sm">No cases in {col.label}</p>
  1212â†’                      </div>
  1213â†’                    )}
  1214â†’                  </div>
  1215â†’                </div>
  1216â†’              );
  1217â†’            })}
  1218â†’          </div>
  1219â†’
  1220â†’          {/* Drag Preview - floating card that follows cursor (same as Sales & Prep) */}
  1221â†’          {draggedCard && (
  1222â†’            <div
  1223â†’              className="fixed pointer-events-none z-50"
  1224â†’              style={{
  1225â†’                left: dragPosition.x - 120,
  1226â†’                top: dragPosition.y - 30,
  1227â†’                transform: "rotate(3deg)",
  1228â†’              }}
  1229â†’            >
  1230â†’              <div className="bg-white rounded-xl shadow-2xl border-2 border-blue-400 w-60 p-3 opacity-90">
  1231â†’                <div className="flex items-center gap-2">
  1232â†’                  <p className="font-bold text-slate-900 text-sm truncate">
  1233â†’                    {draggedCard.contactId?.name || "Unknown"}
  1234â†’                  </p>
  1235â†’                </div>
  1236â†’                <span className="inline-block bg-[#fcd34d] border border-yellow-500/50 rounded-md px-2 py-0.5 shadow-sm font-mono font-bold text-slate-900 text-xs tracking-wider uppercase mt-1">
  1237â†’                  {draggedCard.regAtPurchase || draggedCard.details?.vehicleReg || "NO REG"}
  1238â†’                </span>
  1239â†’              </div>
  1240â†’            </div>
  1241â†’          )}
  1242â†’        </>
  1243â†’      )}
  1244â†’
  1245â†’      {/* Case Detail Drawer */}
  1246â†’      {selectedCase && (
  1247â†’        <div className="fixed inset-0 z-50 flex justify-end">
  1248â†’          <div className="bg-black/40 absolute inset-0 backdrop-blur-sm" onClick={() => setSelectedCase(null)}></div>
  1249â†’          <div className="relative bg-white w-full max-w-xl h-full overflow-y-auto shadow-2xl">
  1250â†’            {/* Modern Sticky Header */}
  1251â†’            <div className="sticky top-0 bg-white/95 backdrop-blur-md border-b border-slate-200 px-5 py-4 z-10">
  1252â†’              <div className="flex justify-between items-start gap-3">
  1253â†’                {/* Back button on mobile */}
  1254â†’                <button className="md:hidden p-2 -ml-2 rounded-lg hover:bg-slate-100 transition-colors" onClick={() => setSelectedCase(null)}>
  1255â†’                  <svg className="w-5 h-5 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1256â†’                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
  1257â†’                  </svg>
  1258â†’                </button>
  1259â†’                <div className="flex-1 min-w-0">
  1260â†’                  {/* VRM + Status Pills Row */}
  1261â†’                  <div className="flex items-center gap-2 flex-wrap">
  1262â†’                    <span className="inline-flex items-center bg-amber-100 border border-amber-300 rounded-lg px-3 py-1.5 font-mono font-bold text-slate-900 text-base tracking-wider uppercase shadow-sm">
  1263â†’                      {selectedCase.regAtPurchase || selectedCase.details?.vehicleReg || "NO REG"}
  1264â†’                    </span>
  1265â†’                    {selectedCase.warrantyType && (
  1266â†’                      <span className="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-slate-100 text-slate-600 border border-slate-200">
  1267â†’                        {selectedCase.warrantyType}
  1268â†’                      </span>
  1269â†’                    )}
  1270â†’                    <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold capitalize ${PRIORITIES[selectedCase.priority]?.bg} ${PRIORITIES[selectedCase.priority]?.text} ${PRIORITIES[selectedCase.priority]?.border} border`}>
  1271â†’                      {selectedCase.priority}
  1272â†’                    </span>
  1273â†’                  </div>
  1274â†’                  <p className="text-sm text-slate-500 mt-1.5 truncate">
  1275â†’                    {selectedCase.contactId?.name || "Unknown"} &middot; {daysSince(selectedCase.createdAt)}d open
  1276â†’                  </p>
  1277â†’                </div>
  1278â†’                <div className="hidden md:flex items-center gap-1.5">
  1279â†’                  <button
  1280â†’                    onClick={handleGenerateJobSheet}
  1281â†’                    className="inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-slate-600 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors"
  1282â†’                    title="Share Job Sheet"
  1283â†’                  >
  1284â†’                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1285â†’                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
  1286â†’                    </svg>
  1287â†’                    Share
  1288â†’                  </button>
  1289â†’                  <button
  1290â†’                    className="p-2 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-colors"
  1291â†’                    onClick={() => setSelectedCase(null)}
  1292â†’                  >
  1293â†’                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1294â†’                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
  1295â†’                    </svg>
  1296â†’                  </button>
  1297â†’                </div>
  1298â†’              </div>
  1299â†’
  1300â†’              {/* Status Segmented Control */}
  1301â†’              <div className="flex gap-2 mt-4">
  1302â†’                <div className="flex-1 bg-slate-100 rounded-lg p-1 flex">
  1303â†’                  {COLUMNS.map(c => (
  1304â†’                    <button
  1305â†’                      key={c.key}
  1306â†’                      onClick={async () => {
  1307â†’                        if (selectedCase.boardStatus !== c.key) {
  1308â†’                          await updateCase(
  1309â†’                            { boardStatus: c.key },
  1310â†’                            `Moved to ${c.label}`
  1311â†’                          );
  1312â†’                        }
  1313â†’                      }}
  1314â†’                      className={`flex-1 px-2 py-1.5 text-xs font-medium rounded-md transition-all ${
  1315â†’                        selectedCase.boardStatus === c.key
  1316â†’                          ? "bg-white text-slate-900 shadow-sm"
  1317â†’                          : "text-slate-500 hover:text-slate-700"
  1318â†’                      }`}
  1319â†’                    >
  1320â†’                      {c.label}
  1321â†’                    </button>
  1322â†’                  ))}
  1323â†’                </div>
  1324â†’                <div className="bg-slate-100 rounded-lg p-1 flex">
  1325â†’                  {["low", "normal", "high", "critical"].map(p => (
  1326â†’                    <button
  1327â†’                      key={p}
  1328â†’                      onClick={async () => {
  1329â†’                        if (selectedCase.priority !== p) {
  1330â†’                          await updateCase({ priority: p }, "Priority updated");
  1331â†’                        }
  1332â†’                      }}
  1333â†’                      className={`px-2 py-1.5 text-xs font-medium rounded-md capitalize transition-all ${
  1334â†’                        selectedCase.priority === p
  1335â†’                          ? `${PRIORITIES[p]?.bg} ${PRIORITIES[p]?.text} shadow-sm`
  1336â†’                          : "text-slate-400 hover:text-slate-600"
  1337â†’                      }`}
  1338â†’                    >
  1339â†’                      {p === "critical" ? "!" : p.charAt(0).toUpperCase()}
  1340â†’                    </button>
  1341â†’                  ))}
  1342â†’                </div>
  1343â†’              </div>
  1344â†’            </div>
  1345â†’
  1346â†’            <div className="px-5 py-4 space-y-4">
  1347â†’              {/* Customer & Vehicle Section */}
  1348â†’              <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
  1349â†’                <div className="px-4 py-3 border-b border-slate-100">
  1350â†’                  <h3 className="text-sm font-semibold text-slate-900">Customer & Vehicle</h3>
  1351â†’                </div>
  1352â†’                <div className="p-4">
  1353â†’                  <div className="grid grid-cols-2 gap-x-4 gap-y-3 text-sm">
  1354â†’                    <div>
  1355â†’                      <span className="text-xs font-medium text-slate-500 uppercase tracking-wide">Name</span>
  1356â†’                      <p className="text-slate-900 mt-0.5">{selectedCase.contactId?.name || "â€”"}</p>
  1357â†’                    </div>
  1358â†’                    <div>
  1359â†’                      <span className="text-xs font-medium text-slate-500 uppercase tracking-wide">Phone</span>
  1360â†’                      <p className="text-slate-900 mt-0.5">{selectedCase.contactId?.phone || "â€”"}</p>
  1361â†’                    </div>
  1362â†’                    <div className="col-span-2">
  1363â†’                      <span className="text-xs font-medium text-slate-500 uppercase tracking-wide">Email</span>
  1364â†’                      <p className="text-slate-900 mt-0.5">{selectedCase.contactId?.email || "â€”"}</p>
  1365â†’                    </div>
  1366â†’                    <div>
  1367â†’                      <span className="text-xs font-medium text-slate-500 uppercase tracking-wide">Reg at Purchase</span>
  1368â†’                      <p className="text-slate-900 mt-0.5">{selectedCase.regAtPurchase || "â€”"}</p>
  1369â†’                    </div>
  1370â†’                    <div>
  1371â†’                      <span className="text-xs font-medium text-slate-500 uppercase tracking-wide">Current Reg</span>
  1372â†’                      <p className="text-slate-900 mt-0.5">{selectedCase.currentReg || selectedCase.details?.vehicleReg || "â€”"}</p>
  1373â†’                    </div>
  1374â†’                    {selectedCase.vehicleId && (
  1375â†’                      <>
  1376â†’                        <div className="col-span-2">
  1377â†’                          <span className="text-xs font-medium text-slate-500 uppercase tracking-wide">Vehicle</span>
  1378â†’                          <p className="text-slate-900 mt-0.5">
  1379â†’                            {selectedCase.vehicleId.make} {selectedCase.vehicleId.model} {selectedCase.vehicleId.year}
  1380â†’                          </p>
  1381â†’                        </div>
  1382â†’                        <div className="col-span-2 pt-1">
  1383â†’                          <button
  1384â†’                            className="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-violet-700 bg-violet-50 hover:bg-violet-100 border border-violet-200 rounded-lg transition-colors"
  1385â†’                            onClick={() => {
  1386â†’                              setSelectedVehicleId(selectedCase.vehicleId._id || selectedCase.vehicleId.id);
  1387â†’                              setIsVehicleDrawerOpen(true);
  1388â†’                            }}
  1389â†’                          >
  1390â†’                            <svg className="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1391â†’                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
  1392â†’                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
  1393â†’                            </svg>
  1394â†’                            View Vehicle
  1395â†’                          </button>
  1396â†’                        </div>
  1397â†’                      </>
  1398â†’                    )}
  1399â†’                  </div>
  1400â†’                </div>
  1401â†’              </div>
  1402â†’
  1403â†’              {/* Repair Location Section */}
  1404â†’              <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
  1405â†’                <div className="px-4 py-3 border-b border-slate-100 flex items-center justify-between">
  1406â†’                  <h3 className="text-sm font-semibold text-slate-900">Repair Location</h3>
  1407â†’                  <span className={`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${REPAIR_LOCATION_STYLES[selectedCase.repairLocationType || "WITH_CUSTOMER"]?.bg} ${REPAIR_LOCATION_STYLES[selectedCase.repairLocationType || "WITH_CUSTOMER"]?.text}`}>
  1408â†’                    {REPAIR_LOCATION_LABELS[selectedCase.repairLocationType || "WITH_CUSTOMER"]}
  1409â†’                  </span>
  1410â†’                </div>
  1411â†’                <div className="p-4 space-y-4">
  1412â†’                  {/* Location Type Segmented Control */}
  1413â†’                  <div>
  1414â†’                    <label className="text-xs font-medium text-slate-500 uppercase tracking-wide mb-2 block">Location Type</label>
  1415â†’                    <div className="bg-slate-100 rounded-lg p-1 flex">
  1416â†’                      {[
  1417â†’                        { key: "WITH_CUSTOMER", label: "With Customer", icon: "ğŸ " },
  1418â†’                        { key: "ON_SITE", label: "On-site", icon: "ğŸ¢" },
  1419â†’                        { key: "THIRD_PARTY", label: "Third-party", icon: "ğŸ”§" },
  1420â†’                      ].map(loc => (
  1421â†’                        <button
  1422â†’                          key={loc.key}
  1423â†’                          onClick={async () => {
  1424â†’                            if ((selectedCase.repairLocationType || "WITH_CUSTOMER") !== loc.key) {
  1425â†’                              const oldValue = selectedCase.repairLocationType || "WITH_CUSTOMER";
  1426â†’                              await updateCase({
  1427â†’                                repairLocationType: loc.key,
  1428â†’                                _eventType: "LOCATION_UPDATED",
  1429â†’                                _eventMetadata: { fromLocation: oldValue, toLocation: loc.key }
  1430â†’                              }, "Repair location updated");
  1431â†’                            }
  1432â†’                          }}
  1433â†’                          className={`flex-1 px-2 py-2 text-xs font-medium rounded-md transition-all flex items-center justify-center gap-1 ${
  1434â†’                            (selectedCase.repairLocationType || "WITH_CUSTOMER") === loc.key
  1435â†’                              ? `${REPAIR_LOCATION_STYLES[loc.key]?.bg} ${REPAIR_LOCATION_STYLES[loc.key]?.text} shadow-sm`
  1436â†’                              : "text-slate-500 hover:text-slate-700"
  1437â†’                          }`}
  1438â†’                        >
  1439â†’                          <span>{loc.icon}</span>
  1440â†’                          <span className="hidden sm:inline">{loc.label}</span>
  1441â†’                        </button>
  1442â†’                      ))}
  1443â†’                    </div>
  1444â†’                  </div>
  1445â†’
  1446â†’                  {/* Show additional fields for third-party repairs */}
  1447â†’                  {selectedCase.repairLocationType === "THIRD_PARTY" && (
  1448â†’                    <div className="space-y-3 pt-2 border-t border-slate-100">
  1449â†’                      <div>
  1450â†’                        <label className="text-xs font-medium text-slate-500 uppercase tracking-wide mb-1.5 block">Garage Name</label>
  1451â†’                        <input
  1452â†’                          type="text"
  1453â†’                          className="w-full px-3 py-2 bg-slate-50 border border-transparent rounded-lg text-slate-900 placeholder-slate-400 focus:bg-white focus:ring-2 focus:ring-violet-500 focus:border-transparent transition-all outline-none text-sm"
  1454â†’                          value={selectedCase.repairLocationName || ""}
  1455â†’                          placeholder="e.g., ABC Motors"
  1456â†’                          onChange={(e) => setSelectedCase({ ...selectedCase, repairLocationName: e.target.value })}
  1457â†’                          onBlur={() => updateCase({ repairLocationName: selectedCase.repairLocationName })}
  1458â†’                        />
  1459â†’                      </div>
  1460â†’
  1461â†’                      <div>
  1462â†’                        <label className="text-xs font-medium text-slate-500 uppercase tracking-wide mb-1.5 block">Notes</label>
  1463â†’                        <textarea
  1464â†’                          className="w-full px-3 py-2 bg-slate-50 border border-transparent rounded-lg text-slate-900 placeholder-slate-400 focus:bg-white focus:ring-2 focus:ring-violet-500 focus:border-transparent transition-all outline-none text-sm resize-none"
  1465â†’                          rows={2}
  1466â†’                          value={selectedCase.repairLocationNotes || ""}
  1467â†’                          placeholder="Any notes about the repair location..."
  1468â†’                          onChange={(e) => setSelectedCase({ ...selectedCase, repairLocationNotes: e.target.value })}
  1469â†’                          onBlur={() => updateCase({ repairLocationNotes: selectedCase.repairLocationNotes })}
  1470â†’                        />
  1471â†’                      </div>
  1472â†’                    </div>
  1473â†’                  )}
  1474â†’                </div>
  1475â†’              </div>
  1476â†’
  1477â†’              {/* Booking Section - Accent Styled */}
  1478â†’              <div className={`rounded-xl border-2 shadow-sm overflow-hidden ${
  1479â†’                selectedCase.bookedInAt
  1480â†’                  ? "bg-emerald-50/50 border-emerald-200"
  1481â†’                  : "bg-amber-50/50 border-amber-200"
  1482â†’              }`}>
  1483â†’                <div className={`px-4 py-3 flex items-center justify-between ${
  1484â†’                  selectedCase.bookedInAt
  1485â†’                    ? "bg-emerald-100/50 border-b border-emerald-200"
  1486â†’                    : "bg-amber-100/50 border-b border-amber-200"
  1487â†’                }`}>
  1488â†’                  <div className="flex items-center gap-2">
  1489â†’                    <span className="text-lg">{selectedCase.bookedInAt ? "ğŸ“…" : "â³"}</span>
  1490â†’                    <h3 className="text-sm font-semibold text-slate-900">Booking</h3>
  1491â†’                  </div>
  1492â†’                  {selectedCase.bookedInAt ? (
  1493â†’                    <span className="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700 border border-emerald-200">
  1494â†’                      {formatBookedDate(selectedCase.bookedInAt)}
  1495â†’                    </span>
  1496â†’                  ) : (
  1497â†’                    <span className="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-amber-100 text-amber-700 border border-amber-200">
  1498â†’                      Not Booked
  1499â†’                    </span>
  1500â†’                  )}
  1501â†’                </div>
  1502â†’                <div className="p-4">
  1503â†’                  <div>
  1504â†’                    <label className="text-xs font-medium text-slate-500 uppercase tracking-wide mb-1.5 block">Booked Date & Time</label>
  1505â†’                    <input
  1506â†’                      type="datetime-local"
  1507â†’                      className={`w-full px-3 py-2.5 rounded-lg text-slate-900 transition-all outline-none text-sm font-medium ${
  1508â†’                        selectedCase.bookedInAt
  1509â†’                          ? "bg-white border border-emerald-200 focus:ring-2 focus:ring-emerald-500"
  1510â†’                          : "bg-white border border-amber-200 focus:ring-2 focus:ring-amber-500"
  1511â†’                      }`}
  1512â†’                      value={selectedCase.bookedInAt ? new Date(selectedCase.bookedInAt).toISOString().slice(0, 16) : ""}
  1513â†’                      onChange={async (e) => {
  1514â†’                        const newValue = e.target.value ? new Date(e.target.value).toISOString() : null;
  1515â†’                        const oldValue = selectedCase.bookedInAt || null;
  1516â†’                        await updateCase({
  1517â†’                          bookedInAt: newValue,
  1518â†’                          _eventType: "BOOKING_UPDATED",
  1519â†’                          _eventMetadata: { oldBookedAt: oldValue, newBookedAt: newValue }
  1520â†’                        }, newValue ? "Booking updated" : null);
  1521â†’                      }}
  1522â†’                    />
  1523â†’                    {selectedCase.bookedInAt && (
  1524â†’                      <button
  1525â†’                        className="inline-flex items-center gap-1 mt-2 px-2 py-1 text-xs font-medium text-slate-500 hover:text-red-600 hover:bg-red-50 rounded transition-colors"
  1526â†’                        onClick={async () => {
  1527â†’                          const oldValue = selectedCase.bookedInAt;
  1528â†’                          await updateCase({
  1529â†’                            bookedInAt: null,
  1530â†’                            _eventType: "BOOKING_UPDATED",
  1531â†’                            _eventMetadata: { oldBookedAt: oldValue, newBookedAt: null }
  1532â†’                          }, "Booking cleared");
  1533â†’                        }}
  1534â†’                      >
  1535â†’                        <svg className="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  1536â†’                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
  1537â†’                        </svg>
  1538â†’                        Clear booking
  1539â†’                      </button>
  1540â†’                    )}
  1541â†’                  </div>
  1542â†’                </div>
  1543â†’              </div>
  1544â†’
  1545â†’              {/* Parts Required Section */}
  1546â†’              <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
  1547â†’                <div className="px-4 py-3 border-b border-slate-100 flex items-center justify-between">
  1548â†’                  <h3 className="text-sm font-semibold text-slate-900">Parts</h3>
  1549â†’                  {selectedCase.partsRequired && (
  1550â†’                    <span className="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-700">
  1551â†’                      Required
  1552â†’                    </span>
  1553â†’                  )}
  1554â†’                </div>
  1555â†’                <div className="p-4 space-y-3">
  1556â†’                  <label className="flex items-center gap-3 cursor-pointer group">
  1557â†’                    <div className="relative">
  1558â†’                      <input
  1559â†’                        type="checkbox"
  1560â†’                        className="sr-only peer"
  1561â†’                        checked={selectedCase.partsRequired || false}
  1562â†’                        onChange={async (e) => {
  1563â†’                          const newValue = e.target.checked;
  1564â†’                          const oldValue = selectedCase.partsRequired || false;
  1565â†’                          await updateCase({
  1566â†’                            partsRequired: newValue,
  1567â†’                            _eventType: "PARTS_UPDATED",
  1568â†’                            _eventMetadata: { partsRequired: newValue, wasRequired: oldValue }
  1569â†’                          }, newValue ? "Parts required marked" : "Parts not required");
  1570â†’                        }}
  1571â†’                      />
  1572â†’                      <div className="w-10 h-6 bg-slate-200 rounded-full peer-checked:bg-violet-500 transition-colors"></div>
  1573â†’                      <div className="absolute left-1 top-1 w-4 h-4 bg-white rounded-full shadow transition-transform peer-checked:translate-x-4"></div>
  1574â†’                    </div>
  1575â†’                    <span className="text-sm font-medium text-slate-700 group-hover:text-slate-900">Parts required</span>
  1576â†’                  </label>
  1577â†’
  1578â†’                  {selectedCase.partsRequired && (
  1579â†’                    <div className="pt-2 border-t border-slate-100">
  1580â†’                      <label className="text-xs font-medium text-slate-500 uppercase tracking-wide mb-1.5 block">Parts Notes</label>
  1581â†’                      <textarea
  1582â†’                        className="w-full px-3 py-2 bg-slate-50 border border-transparent rounded-lg text-slate-900 placeholder-slate-400 focus:bg-white focus:ring-2 focus:ring-violet-500 focus:border-transparent transition-all outline-none text-sm resize-none"
  1583â†’                        rows={2}
  1584â†’                        value={selectedCase.partsNotes || ""}
  1585â†’                        placeholder="List parts needed, order status, etc..."
  1586â†’                        onChange={(e) => setSelectedCase({ ...selectedCase, partsNotes: e.target.value })}
  1587â†’                        onBlur={() => updateCase({
  1588â†’                          partsNotes: selectedCase.partsNotes,
  1589â†’                          _eventType: "PARTS_UPDATED",
  1590â†’                          _eventMetadata: { partsNotes: selectedCase.partsNotes }
  1591â†’                        })}
  1592â†’                      />
  1593â†’                    </div>
  1594â†’                  )}
  1595â†’                </div>
  1596â†’              </div>
  1597â†’
  1598â†’              {/* Courtesy Car Section */}
  1599â†’              <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
