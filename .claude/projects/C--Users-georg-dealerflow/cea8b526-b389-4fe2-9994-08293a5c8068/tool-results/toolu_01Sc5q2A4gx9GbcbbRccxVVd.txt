     1â†’import { useEffect, useState, useRef } from "react";
     2â†’import { useRouter } from "next/router";
     3â†’import Head from "next/head";
     4â†’import DashboardLayout from "@/components/DashboardLayout";
     5â†’import VehicleDrawer from "@/components/VehicleDrawer";
     6â†’import AISuggestionsPanel from "@/components/AISuggestionsPanel";
     7â†’import { toast } from "react-hot-toast";
     8â†’
     9â†’// Column config matching Sales & Prep style
    10â†’// NOTE: Internal keys are legacy names - keep stable for database compatibility
    11â†’// Display labels have been updated for clarity
    12â†’const COLUMNS = [
    13â†’  { key: "not_booked_in", label: "Not Booked In", gradient: "from-red-100/60", accent: "border-l-red-400", accentBg: "bg-red-400" },
    14â†’  { key: "on_site", label: "Booked In", gradient: "from-amber-100/60", accent: "border-l-amber-400", accentBg: "bg-amber-400" }, // Legacy key: "on_site" displays as "Booked In"
    15â†’  { key: "work_complete", label: "Work Complete", gradient: "from-blue-100/60", accent: "border-l-blue-400", accentBg: "bg-blue-400" },
    16â†’  { key: "collected", label: "Closed", gradient: "from-emerald-100/60", accent: "border-l-emerald-400", accentBg: "bg-emerald-400" }, // Legacy key: "collected" displays as "Closed"
    17â†’];
    18â†’
    19â†’const PRIORITIES = {
    20â†’  low: { bg: "bg-slate-100", text: "text-slate-600", border: "border-slate-200" },
    21â†’  normal: { bg: "bg-blue-50", text: "text-blue-700", border: "border-blue-100" },
    22â†’  high: { bg: "bg-amber-50", text: "text-amber-700", border: "border-amber-100" },
    23â†’  critical: { bg: "bg-red-50", text: "text-red-700", border: "border-red-100" },
    24â†’};
    25â†’
    26â†’const SOURCE_LABELS = {
    27â†’  warranty_claim_form: "Warranty Claim",
    28â†’  low_review: "Low Review",
    29â†’  complaint_form: "Complaint",
    30â†’  manual: "Manual",
    31â†’};
    32â†’
    33â†’// Timeline event icons
    34â†’const EVENT_ICONS = {
    35â†’  CASE_CREATED: "ðŸ“‹",
    36â†’  SUBMISSION_LINKED: "ðŸ”—",
    37â†’  COMMENT_ADDED: "ðŸ’¬",
    38â†’  STATUS_CHANGED: "ðŸ”„",
    39â†’  AI_REVIEW_GENERATED: "ðŸ¤–",
    40â†’  ATTACHMENT_ADDED: "ðŸ“Ž",
    41â†’  LOCATION_UPDATED: "ðŸ“",
    42â†’  BOOKING_UPDATED: "ðŸ“…",
    43â†’  PARTS_UPDATED: "ðŸ”§",
    44â†’  COURTESY_REQUIRED_TOGGLED: "ðŸš—",
    45â†’  COURTESY_ALLOCATED: "ðŸš—",
    46â†’  COURTESY_RETURNED: "ðŸš—",
    47â†’  COURTESY_OUT_RECORDED: "ðŸš—",
    48â†’  COURTESY_IN_RECORDED: "ðŸš—",
    49â†’  // Warranty booking auto-move events
    50â†’  WARRANTY_BOOKED_IN: "ðŸ“…",
    51â†’  WARRANTY_BOOKING_UPDATED: "ðŸ“…",
    52â†’  WARRANTY_BOOKING_CANCELLED: "âŒ",
    53â†’  WARRANTY_STAGE_MOVED: "ðŸ”€",
    54â†’};
    55â†’
    56â†’// Timeline grouping constant
    57â†’const STATUS_FLIP_GROUP_WINDOW_MS = 10 * 60 * 1000; // 10 minutes
    58â†’
    59â†’// Group consecutive STATUS_CHANGED events within the time window
    60â†’const groupTimelineEvents = (events) => {

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
